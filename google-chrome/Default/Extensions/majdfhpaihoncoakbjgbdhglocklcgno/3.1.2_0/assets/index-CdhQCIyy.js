var In=Object.defineProperty;var Pn=(n,e,t)=>e in n?In(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var z=(n,e,t)=>Pn(n,typeof e!="symbol"?e+"":e,t);var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ys(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qs={exports:{}};(function(n,e){(function(t,s){s(n)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ps,function(t){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)t.exports=globalThis.browser;else{const s="The message port closed before a response was received.",i=r=>{const a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(k,N=void 0){super(N),this.createItem=k}get(k){return this.has(k)||this.set(k,this.createItem(k)),super.get(k)}}const u=S=>S&&typeof S=="object"&&typeof S.then=="function",h=(S,k)=>(...N)=>{r.runtime.lastError?S.reject(new Error(r.runtime.lastError.message)):k.singleCallbackArg||N.length<=1&&k.singleCallbackArg!==!1?S.resolve(N[0]):S.resolve(N)},g=S=>S==1?"argument":"arguments",w=(S,k)=>function($,...K){if(K.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${g(k.minArgs)} for ${S}(), got ${K.length}`);if(K.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${g(k.maxArgs)} for ${S}(), got ${K.length}`);return new Promise((Y,X)=>{if(k.fallbackToNoCallback)try{$[S](...K,h({resolve:Y,reject:X},k))}catch(P){console.warn(`${S} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,P),$[S](...K),k.fallbackToNoCallback=!1,k.noCallback=!0,Y()}else k.noCallback?($[S](...K),Y()):$[S](...K,h({resolve:Y,reject:X},k))})},d=(S,k,N)=>new Proxy(k,{apply($,K,Y){return N.call(K,S,...Y)}});let f=Function.call.bind(Object.prototype.hasOwnProperty);const o=(S,k={},N={})=>{let $=Object.create(null),K={has(X,P){return P in S||P in $},get(X,P,J){if(P in $)return $[P];if(!(P in S))return;let q=S[P];if(typeof q=="function")if(typeof k[P]=="function")q=d(S,S[P],k[P]);else if(f(N,P)){let ee=w(P,N[P]);q=d(S,S[P],ee)}else q=q.bind(S);else if(typeof q=="object"&&q!==null&&(f(k,P)||f(N,P)))q=o(q,k[P],N[P]);else if(f(N,"*"))q=o(q,k[P],N["*"]);else return Object.defineProperty($,P,{configurable:!0,enumerable:!0,get(){return S[P]},set(ee){S[P]=ee}}),q;return $[P]=q,q},set(X,P,J,q){return P in $?$[P]=J:S[P]=J,!0},defineProperty(X,P,J){return Reflect.defineProperty($,P,J)},deleteProperty(X,P){return Reflect.deleteProperty($,P)}},Y=Object.create(S);return new Proxy(Y,K)},l=S=>({addListener(k,N,...$){k.addListener(S.get(N),...$)},hasListener(k,N){return k.hasListener(S.get(N))},removeListener(k,N){k.removeListener(S.get(N))}}),p=new c(S=>typeof S!="function"?S:function(N){const $=o(N,{},{getContent:{minArgs:0,maxArgs:0}});S($)}),m=new c(S=>typeof S!="function"?S:function(N,$,K){let Y=!1,X,P=new Promise(oe=>{X=function(W){Y=!0,oe(W)}}),J;try{J=S(N,$,X)}catch(oe){J=Promise.reject(oe)}const q=J!==!0&&u(J);if(J!==!0&&!q&&!Y)return!1;const ee=oe=>{oe.then(W=>{K(W)},W=>{let ne;W&&(W instanceof Error||typeof W.message=="string")?ne=W.message:ne="An unexpected error occurred",K({__mozWebExtensionPolyfillReject__:!0,message:ne})}).catch(W=>{console.error("Failed to send onMessage rejected reply",W)})};return ee(q?J:P),!0}),y=({reject:S,resolve:k},N)=>{r.runtime.lastError?r.runtime.lastError.message===s?k():S(new Error(r.runtime.lastError.message)):N&&N.__mozWebExtensionPolyfillReject__?S(new Error(N.message)):k(N)},b=(S,k,N,...$)=>{if($.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${g(k.minArgs)} for ${S}(), got ${$.length}`);if($.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${g(k.maxArgs)} for ${S}(), got ${$.length}`);return new Promise((K,Y)=>{const X=y.bind(null,{resolve:K,reject:Y});$.push(X),N.sendMessage(...$)})},_={devtools:{network:{onRequestFinished:l(p)}},runtime:{onMessage:l(m),onMessageExternal:l(m),sendMessage:b.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:b.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},U={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":U},services:{"*":U},websites:{"*":U}},o(r,_,a)};t.exports=i(chrome)}})})(Qs);var On=Qs.exports;const B=Ys(On);var Q=[];for(var Jt=0;Jt<256;++Jt)Q.push((Jt+256).toString(16).slice(1));function Rn(n,e=0){return(Q[n[e+0]]+Q[n[e+1]]+Q[n[e+2]]+Q[n[e+3]]+"-"+Q[n[e+4]]+Q[n[e+5]]+"-"+Q[n[e+6]]+Q[n[e+7]]+"-"+Q[n[e+8]]+Q[n[e+9]]+"-"+Q[n[e+10]]+Q[n[e+11]]+Q[n[e+12]]+Q[n[e+13]]+Q[n[e+14]]+Q[n[e+15]]).toLowerCase()}var xt,Ln=new Uint8Array(16);function Nn(){if(!xt&&(xt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xt(Ln)}var jn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ts={randomUUID:jn};function Xs(n,e,t){if(Ts.randomUUID&&!e&&!n)return Ts.randomUUID();n=n||{};var s=n.random||(n.rng||Nn)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Rn(s)}function Dn(n){return typeof n=="object"&&n!==null&&"type"in n&&typeof n.type=="string"}class ae{constructor(){z(this,"available",!1);z(this,"bootResolve");z(this,"bootReject");z(this,"bootPromise");this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((e,t)=>{this.bootResolve=()=>{this.available=!0,e()},this.bootReject=()=>{this.available=!1,t()}})}}class $n extends ae{constructor(){super();z(this,"messageMap",new Map);z(this,"popupPort",null);B.runtime.onConnect.addListener(this.longLivedMessageHandler.bind(this))}async boot(){this.bootResolve(),await this.bootPromise}longLivedMessageHandler(t){this.popupPort=t,t.onMessage.addListener(s=>{if(Dn(s)){const i=this.messageMap.get(s.type);i&&this.bootPromise.then(()=>i(s.data)).then(r=>{t.postMessage({id:s.id,...r})}).catch(()=>{})}}),t.onDisconnect.addListener(()=>{this.popupPort=null})}subscribe(t){Object.entries(t).forEach(([i,r])=>{if(this.messageMap.has(i))throw Error(`MessageService: subscribe already has ${i} handler`);this.messageMap.set(i,r)})}notifyPopup(t){var s;(s=this.popupPort)==null||s.postMessage(t)}}const $t=new $n;var D=(n=>(n.persist="persist",n.session="session",n))(D||{});class ie{constructor(e,t){z(this,"storageAreaMap",{[D.session]:B.storage.session,[D.persist]:B.storage.local});z(this,"state");this.moduleName=e,this.moduleSchema=t,this.state=t.getDefaultValue()}async sync(){this.state=await this.get()}async set(e){const t=new Map;Object.entries(e).forEach(([s,i])=>{const r=this.moduleSchema.getPropDescription(s),a=t.get(r)??{};t.set(r,{...a,[s]:i})}),this.state=Object.assign({},...t.values()),await Promise.all([...t.entries()].map(([s,i])=>this.storageAreaMap[s].set({[this.moduleName]:i})))}async setItems(e){const t=await this.get(),s=Object.assign(t,e);await this.set(s)}async get(){const t=(await Promise.all(Object.values(this.storageAreaMap).map(a=>a.get(this.moduleName)))).map(a=>a[this.moduleName]),s=this.moduleSchema.getDefaultValue(),i=Object.assign({},s,...t);return this.moduleSchema.safeParseWithDefaults(i)}async getItems(...e){const t=await this.get();return ie.pickPartialObject(t,e)}async remove(){await Promise.all(Object.values(this.storageAreaMap).map(e=>e.remove(this.moduleName)))}async removeItems(...e){const t=await this.get(),s=ie.omitPartialObject(t,e);await this.set(s)}static omitPartialObject(e,t){return Object.fromEntries(Object.entries(e).filter(([i])=>!t.includes(i)))}static pickPartialObject(e,t){return Object.fromEntries(t.map(i=>[i,e[i]]))}}var V;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const r={};for(const a of i)r[a]=a;return r},n.getValidEnumValues=i=>{const r=n.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(const c of r)a[c]=i[c];return n.objectValues(a)},n.objectValues=i=>n.objectKeys(i).map(function(r){return i[r]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.push(a);return r},n.find=(i,r)=>{for(const a of i)if(r(a))return a},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,r=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}n.joinValues=s,n.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})(V||(V={}));var ns;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(ns||(ns={}));const C=V.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ae=n=>{switch(typeof n){case"undefined":return C.undefined;case"string":return C.string;case"number":return isNaN(n)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(n)?C.array:n===null?C.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?C.promise:typeof Map<"u"&&n instanceof Map?C.map:typeof Set<"u"&&n instanceof Set?C.set:typeof Date<"u"&&n instanceof Date?C.date:C.object;default:return C.unknown}},x=V.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Mn=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ce extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let c=s,u=0;for(;u<a.path.length;){const h=a.path[u];u===a.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(a))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return i(this),s}static assert(e){if(!(e instanceof ce))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,V.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}ce.create=n=>new ce(n);const Fe=(n,e)=>{let t;switch(n.code){case x.invalid_type:n.received===C.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case x.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,V.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:t=`Unrecognized key(s) in object: ${V.joinValues(n.keys,", ")}`;break;case x.invalid_union:t="Invalid input";break;case x.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${V.joinValues(n.options)}`;break;case x.invalid_enum_value:t=`Invalid enum value. Expected ${V.joinValues(n.options)}, received '${n.received}'`;break;case x.invalid_arguments:t="Invalid function arguments";break;case x.invalid_return_type:t="Invalid function return type";break;case x.invalid_date:t="Invalid date";break;case x.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:V.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case x.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case x.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case x.custom:t="Invalid input";break;case x.invalid_intersection_types:t="Intersection results could not be merged";break;case x.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case x.not_finite:t="Number must be finite";break;default:t=e.defaultError,V.assertNever(n)}return{message:t}};let en=Fe;function Un(n){en=n}function St(){return en}const kt=n=>{const{data:e,path:t,errorMaps:s,issueData:i}=n,r=[...t,...i.path||[]],a={...i,path:r};if(i.message!==void 0)return{...i,path:r,message:i.message};let c="";const u=s.filter(h=>!!h).slice().reverse();for(const h of u)c=h(a,{data:e,defaultError:c}).message;return{...i,path:r,message:c}},Vn=[];function A(n,e){const t=St(),s=kt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Fe?void 0:Fe].filter(i=>!!i)});n.common.issues.push(s)}class te{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if(i.status==="aborted")return I;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const i of t){const r=await i.key,a=await i.value;s.push({key:r,value:a})}return te.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:r,value:a}=i;if(r.status==="aborted"||a.status==="aborted")return I;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(s[r.value]=a.value)}return{status:e.value,value:s}}}const I=Object.freeze({status:"aborted"}),Me=n=>({status:"dirty",value:n}),re=n=>({status:"valid",value:n}),is=n=>n.status==="aborted",rs=n=>n.status==="dirty",Xe=n=>n.status==="valid",et=n=>typeof Promise<"u"&&n instanceof Promise;function At(n,e,t,s){if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function tn(n,e,t,s,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var T;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(T||(T={}));var Ge,Ye;class be{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Es=(n,e)=>{if(Xe(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ce(n.common.issues);return this._error=t,this._error}}};function L(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:i}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,c)=>{var u,h;const{message:g}=n;return a.code==="invalid_enum_value"?{message:g??c.defaultError}:typeof c.data>"u"?{message:(u=g??s)!==null&&u!==void 0?u:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(h=g??t)!==null&&h!==void 0?h:c.defaultError}},description:i}}class j{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ae(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:Ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(et(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const i={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)},r=this._parseSync({data:e,path:i.path,parent:i});return Es(i,r)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(et(i)?i:Promise.resolve(i));return Es(s,r)}refine(e,t){const s=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,r)=>{const a=e(i),c=()=>r.addIssue({code:x.custom,...s(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,t){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof t=="function"?t(s,i):t),!1))}_refinement(e){return new pe({schema:this,typeName:E.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ve.create(this,this._def)}nullable(){return Ie.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return he.create(this,this._def)}promise(){return Be.create(this,this._def)}or(e){return it.create([this,e],this._def)}and(e){return rt.create(this,e,this._def)}transform(e){return new pe({...L(this._def),schema:this,typeName:E.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ut({...L(this._def),innerType:this,defaultValue:t,typeName:E.ZodDefault})}brand(){return new fs({typeName:E.ZodBranded,type:this,...L(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new dt({...L(this._def),innerType:this,catchValue:t,typeName:E.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return gt.create(this,e)}readonly(){return ht.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zn=/^c[^\s-]{8,}$/i,Fn=/^[0-9a-z]+$/,Zn=/^[0-9A-HJKMNP-TV-Z]{26}$/,Bn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wn=/^[a-z0-9_-]{21}$/i,Kn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Hn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gt;const Jn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Yn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qn=new RegExp(`^${sn}$`);function nn(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Xn(n){return new RegExp(`^${nn(n)}$`)}function rn(n){let e=`${sn}T${nn(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ei(n,e){return!!((e==="v4"||!e)&&Jn.test(n)||(e==="v6"||!e)&&Gn.test(n))}class de extends j{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.string,received:r.parsedType}),I}const s=new te;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,c=e.data.length<r.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?A(i,{code:x.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):c&&A(i,{code:x.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")qn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"email",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")Gt||(Gt=new RegExp(Hn,"u")),Gt.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"emoji",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")Bn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"uuid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")Wn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"nanoid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")zn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"cuid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")Fn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"cuid2",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")Zn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"ulid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),A(i,{validation:"url",code:x.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"regex",code:x.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?rn(r).test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?Qn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?Xn(r).test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?Kn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"duration",code:x.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?ei(e.data,r.version)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"ip",code:x.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?Yn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"base64",code:x.invalid_string,message:r.message}),s.dirty()):V.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(i=>e.test(i),{validation:t,code:x.invalid_string,...T.errToObj(s)})}_addCheck(e){return new de({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...T.errToObj(e)})}url(e){return this._addCheck({kind:"url",...T.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...T.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...T.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...T.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...T.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...T.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...T.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...T.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...T.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...T.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...T.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...T.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...T.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...T.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...T.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...T.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...T.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...T.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...T.errToObj(t)})}nonempty(e){return this.min(1,T.errToObj(e))}trim(){return new de({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new de({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new de({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}de.create=n=>{var e;return new de({checks:[],typeName:E.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...L(n)})};function ti(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=t>s?t:s,r=parseInt(n.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return r%a/Math.pow(10,i)}class Ce extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.number,received:r.parsedType}),I}let s;const i=new te;for(const r of this._def.checks)r.kind==="int"?V.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:x.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?ti(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:x.not_finite,message:r.message}),i.dirty()):V.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,T.toString(t))}gt(e,t){return this.setLimit("min",e,!1,T.toString(t))}lte(e,t){return this.setLimit("max",e,!0,T.toString(t))}lt(e,t){return this.setLimit("max",e,!1,T.toString(t))}setLimit(e,t,s,i){return new Ce({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:T.toString(i)}]})}_addCheck(e){return new Ce({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:T.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:T.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&V.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ce.create=n=>new Ce({checks:[],typeName:E.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...L(n)});class Te extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==C.bigint){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.bigint,received:r.parsedType}),I}let s;const i=new te;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):V.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,T.toString(t))}gt(e,t){return this.setLimit("min",e,!1,T.toString(t))}lte(e,t){return this.setLimit("max",e,!0,T.toString(t))}lt(e,t){return this.setLimit("max",e,!1,T.toString(t))}setLimit(e,t,s,i){return new Te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:T.toString(i)}]})}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Te.create=n=>{var e;return new Te({checks:[],typeName:E.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...L(n)})};class tt extends j{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.boolean,received:s.parsedType}),I}return re(e.data)}}tt.create=n=>new tt({typeName:E.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...L(n)});class Re extends j{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.date,received:r.parsedType}),I}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_date}),I}const s=new te;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):V.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Re({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:T.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:T.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Re.create=n=>new Re({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:E.ZodDate,...L(n)});class Ct extends j{_parse(e){if(this._getType(e)!==C.symbol){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.symbol,received:s.parsedType}),I}return re(e.data)}}Ct.create=n=>new Ct({typeName:E.ZodSymbol,...L(n)});class st extends j{_parse(e){if(this._getType(e)!==C.undefined){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.undefined,received:s.parsedType}),I}return re(e.data)}}st.create=n=>new st({typeName:E.ZodUndefined,...L(n)});class nt extends j{_parse(e){if(this._getType(e)!==C.null){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.null,received:s.parsedType}),I}return re(e.data)}}nt.create=n=>new nt({typeName:E.ZodNull,...L(n)});class Ze extends j{constructor(){super(...arguments),this._any=!0}_parse(e){return re(e.data)}}Ze.create=n=>new Ze({typeName:E.ZodAny,...L(n)});class Oe extends j{constructor(){super(...arguments),this._unknown=!0}_parse(e){return re(e.data)}}Oe.create=n=>new Oe({typeName:E.ZodUnknown,...L(n)});class ke extends j{_parse(e){const t=this._getOrReturnCtx(e);return A(t,{code:x.invalid_type,expected:C.never,received:t.parsedType}),I}}ke.create=n=>new ke({typeName:E.ZodNever,...L(n)});class Tt extends j{_parse(e){if(this._getType(e)!==C.undefined){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.void,received:s.parsedType}),I}return re(e.data)}}Tt.create=n=>new Tt({typeName:E.ZodVoid,...L(n)});class he extends j{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==C.array)return A(t,{code:x.invalid_type,expected:C.array,received:t.parsedType}),I;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,c=t.data.length<i.exactLength.value;(a||c)&&(A(t,{code:a?x.too_big:x.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(A(t,{code:x.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(A(t,{code:x.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,c)=>i.type._parseAsync(new be(t,a,t.path,c)))).then(a=>te.mergeArray(s,a));const r=[...t.data].map((a,c)=>i.type._parseSync(new be(t,a,t.path,c)));return te.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new he({...this._def,minLength:{value:e,message:T.toString(t)}})}max(e,t){return new he({...this._def,maxLength:{value:e,message:T.toString(t)}})}length(e,t){return new he({...this._def,exactLength:{value:e,message:T.toString(t)}})}nonempty(e){return this.min(1,e)}}he.create=(n,e)=>new he({type:n,minLength:null,maxLength:null,exactLength:null,typeName:E.ZodArray,...L(e)});function $e(n){if(n instanceof G){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=ve.create($e(s))}return new G({...n._def,shape:()=>e})}else return n instanceof he?new he({...n._def,type:$e(n.element)}):n instanceof ve?ve.create($e(n.unwrap())):n instanceof Ie?Ie.create($e(n.unwrap())):n instanceof ye?ye.create(n.items.map(e=>$e(e))):n}class G extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=V.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==C.object){const h=this._getOrReturnCtx(e);return A(h,{code:x.invalid_type,expected:C.object,received:h.parsedType}),I}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof ke&&this._def.unknownKeys==="strip"))for(const h in i.data)a.includes(h)||c.push(h);const u=[];for(const h of a){const g=r[h],w=i.data[h];u.push({key:{status:"valid",value:h},value:g._parse(new be(i,w,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof ke){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of c)u.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(h==="strict")c.length>0&&(A(i,{code:x.unrecognized_keys,keys:c}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of c){const w=i.data[g];u.push({key:{status:"valid",value:g},value:h._parse(new be(i,w,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of u){const w=await g.key,d=await g.value;h.push({key:w,value:d,alwaysSet:g.alwaysSet})}return h}).then(h=>te.mergeObjectSync(s,h)):te.mergeObjectSync(s,u)}get shape(){return this._def.shape()}strict(e){return T.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var i,r,a,c;const u=(a=(r=(i=this._def).errorMap)===null||r===void 0?void 0:r.call(i,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(c=T.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:E.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};return V.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new G({...this._def,shape:()=>t})}omit(e){const t={};return V.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new G({...this._def,shape:()=>t})}deepPartial(){return $e(this)}partial(e){const t={};return V.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()}),new G({...this._def,shape:()=>t})}required(e){const t={};return V.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof ve;)r=r._def.innerType;t[s]=r}}),new G({...this._def,shape:()=>t})}keyof(){return an(V.objectKeys(this.shape))}}G.create=(n,e)=>new G({shape:()=>n,unknownKeys:"strip",catchall:ke.create(),typeName:E.ZodObject,...L(e)});G.strictCreate=(n,e)=>new G({shape:()=>n,unknownKeys:"strict",catchall:ke.create(),typeName:E.ZodObject,...L(e)});G.lazycreate=(n,e)=>new G({shape:n,unknownKeys:"strip",catchall:ke.create(),typeName:E.ZodObject,...L(e)});class it extends j{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function i(r){for(const c of r)if(c.result.status==="valid")return c.result;for(const c of r)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const a=r.map(c=>new ce(c.ctx.common.issues));return A(t,{code:x.invalid_union,unionErrors:a}),I}if(t.common.async)return Promise.all(s.map(async r=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let r;const a=[];for(const u of s){const h={...t,common:{...t.common,issues:[]},parent:null},g=u._parseSync({data:t.data,path:t.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!r&&(r={result:g,ctx:h}),h.common.issues.length&&a.push(h.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const c=a.map(u=>new ce(u));return A(t,{code:x.invalid_union,unionErrors:c}),I}}get options(){return this._def.options}}it.create=(n,e)=>new it({options:n,typeName:E.ZodUnion,...L(e)});const _e=n=>n instanceof ot?_e(n.schema):n instanceof pe?_e(n.innerType()):n instanceof ct?[n.value]:n instanceof Ee?n.options:n instanceof lt?V.objectValues(n.enum):n instanceof ut?_e(n._def.innerType):n instanceof st?[void 0]:n instanceof nt?[null]:n instanceof ve?[void 0,..._e(n.unwrap())]:n instanceof Ie?[null,..._e(n.unwrap())]:n instanceof fs||n instanceof ht?_e(n.unwrap()):n instanceof dt?_e(n._def.innerType):[];class Mt extends j{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.object)return A(t,{code:x.invalid_type,expected:C.object,received:t.parsedType}),I;const s=this.discriminator,i=t.data[s],r=this.optionsMap.get(i);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(A(t,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),I)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const i=new Map;for(const r of t){const a=_e(r.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,r)}}return new Mt({typeName:E.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...L(s)})}}function as(n,e){const t=Ae(n),s=Ae(e);if(n===e)return{valid:!0,data:n};if(t===C.object&&s===C.object){const i=V.objectKeys(e),r=V.objectKeys(n).filter(c=>i.indexOf(c)!==-1),a={...n,...e};for(const c of r){const u=as(n[c],e[c]);if(!u.valid)return{valid:!1};a[c]=u.data}return{valid:!0,data:a}}else if(t===C.array&&s===C.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<n.length;r++){const a=n[r],c=e[r],u=as(a,c);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===C.date&&s===C.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class rt extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(r,a)=>{if(is(r)||is(a))return I;const c=as(r.value,a.value);return c.valid?((rs(r)||rs(a))&&t.dirty(),{status:t.value,value:c.data}):(A(s,{code:x.invalid_intersection_types}),I)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,a])=>i(r,a)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}rt.create=(n,e,t)=>new rt({left:n,right:e,typeName:E.ZodIntersection,...L(t)});class ye extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.array)return A(s,{code:x.invalid_type,expected:C.array,received:s.parsedType}),I;if(s.data.length<this._def.items.length)return A(s,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),I;!this._def.rest&&s.data.length>this._def.items.length&&(A(s,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((a,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new be(s,a,s.path,c)):null}).filter(a=>!!a);return s.common.async?Promise.all(r).then(a=>te.mergeArray(t,a)):te.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ye({...this._def,rest:e})}}ye.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ye({items:n,typeName:E.ZodTuple,rest:null,...L(e)})};class at extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.object)return A(s,{code:x.invalid_type,expected:C.object,received:s.parsedType}),I;const i=[],r=this._def.keyType,a=this._def.valueType;for(const c in s.data)i.push({key:r._parse(new be(s,c,s.path,c)),value:a._parse(new be(s,s.data[c],s.path,c)),alwaysSet:c in s.data});return s.common.async?te.mergeObjectAsync(t,i):te.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof j?new at({keyType:e,valueType:t,typeName:E.ZodRecord,...L(s)}):new at({keyType:de.create(),valueType:e,typeName:E.ZodRecord,...L(t)})}}class Et extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.map)return A(s,{code:x.invalid_type,expected:C.map,received:s.parsedType}),I;const i=this._def.keyType,r=this._def.valueType,a=[...s.data.entries()].map(([c,u],h)=>({key:i._parse(new be(s,c,s.path,[h,"key"])),value:r._parse(new be(s,u,s.path,[h,"value"]))}));if(s.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of a){const h=await u.key,g=await u.value;if(h.status==="aborted"||g.status==="aborted")return I;(h.status==="dirty"||g.status==="dirty")&&t.dirty(),c.set(h.value,g.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const u of a){const h=u.key,g=u.value;if(h.status==="aborted"||g.status==="aborted")return I;(h.status==="dirty"||g.status==="dirty")&&t.dirty(),c.set(h.value,g.value)}return{status:t.value,value:c}}}}Et.create=(n,e,t)=>new Et({valueType:e,keyType:n,typeName:E.ZodMap,...L(t)});class Le extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.set)return A(s,{code:x.invalid_type,expected:C.set,received:s.parsedType}),I;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(A(s,{code:x.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(A(s,{code:x.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function a(u){const h=new Set;for(const g of u){if(g.status==="aborted")return I;g.status==="dirty"&&t.dirty(),h.add(g.value)}return{status:t.value,value:h}}const c=[...s.data.values()].map((u,h)=>r._parse(new be(s,u,s.path,h)));return s.common.async?Promise.all(c).then(u=>a(u)):a(c)}min(e,t){return new Le({...this._def,minSize:{value:e,message:T.toString(t)}})}max(e,t){return new Le({...this._def,maxSize:{value:e,message:T.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Le.create=(n,e)=>new Le({valueType:n,minSize:null,maxSize:null,typeName:E.ZodSet,...L(e)});class ze extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.function)return A(t,{code:x.invalid_type,expected:C.function,received:t.parsedType}),I;function s(c,u){return kt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,St(),Fe].filter(h=>!!h),issueData:{code:x.invalid_arguments,argumentsError:u}})}function i(c,u){return kt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,St(),Fe].filter(h=>!!h),issueData:{code:x.invalid_return_type,returnTypeError:u}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Be){const c=this;return re(async function(...u){const h=new ce([]),g=await c._def.args.parseAsync(u,r).catch(f=>{throw h.addIssue(s(u,f)),h}),w=await Reflect.apply(a,this,g);return await c._def.returns._def.type.parseAsync(w,r).catch(f=>{throw h.addIssue(i(w,f)),h})})}else{const c=this;return re(function(...u){const h=c._def.args.safeParse(u,r);if(!h.success)throw new ce([s(u,h.error)]);const g=Reflect.apply(a,this,h.data),w=c._def.returns.safeParse(g,r);if(!w.success)throw new ce([i(g,w.error)]);return w.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ze({...this._def,args:ye.create(e).rest(Oe.create())})}returns(e){return new ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new ze({args:e||ye.create([]).rest(Oe.create()),returns:t||Oe.create(),typeName:E.ZodFunction,...L(s)})}}class ot extends j{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ot.create=(n,e)=>new ot({getter:n,typeName:E.ZodLazy,...L(e)});class ct extends j{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return A(t,{received:t.data,code:x.invalid_literal,expected:this._def.value}),I}return{status:"valid",value:e.data}}get value(){return this._def.value}}ct.create=(n,e)=>new ct({value:n,typeName:E.ZodLiteral,...L(e)});function an(n,e){return new Ee({values:n,typeName:E.ZodEnum,...L(e)})}class Ee extends j{constructor(){super(...arguments),Ge.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return A(t,{expected:V.joinValues(s),received:t.parsedType,code:x.invalid_type}),I}if(At(this,Ge)||tn(this,Ge,new Set(this._def.values)),!At(this,Ge).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return A(t,{received:t.data,code:x.invalid_enum_value,options:s}),I}return re(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ee.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ee.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Ge=new WeakMap;Ee.create=an;class lt extends j{constructor(){super(...arguments),Ye.set(this,void 0)}_parse(e){const t=V.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==C.string&&s.parsedType!==C.number){const i=V.objectValues(t);return A(s,{expected:V.joinValues(i),received:s.parsedType,code:x.invalid_type}),I}if(At(this,Ye)||tn(this,Ye,new Set(V.getValidEnumValues(this._def.values))),!At(this,Ye).has(e.data)){const i=V.objectValues(t);return A(s,{received:s.data,code:x.invalid_enum_value,options:i}),I}return re(e.data)}get enum(){return this._def.values}}Ye=new WeakMap;lt.create=(n,e)=>new lt({values:n,typeName:E.ZodNativeEnum,...L(e)});class Be extends j{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.promise&&t.common.async===!1)return A(t,{code:x.invalid_type,expected:C.promise,received:t.parsedType}),I;const s=t.parsedType===C.promise?t.data:Promise.resolve(t.data);return re(s.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Be.create=(n,e)=>new Be({type:n,typeName:E.ZodPromise,...L(e)});class pe extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===E.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:a=>{A(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const a=i.transform(s.data,r);if(s.common.async)return Promise.resolve(a).then(async c=>{if(t.value==="aborted")return I;const u=await this._def.schema._parseAsync({data:c,path:s.path,parent:s});return u.status==="aborted"?I:u.status==="dirty"||t.value==="dirty"?Me(u.value):u});{if(t.value==="aborted")return I;const c=this._def.schema._parseSync({data:a,path:s.path,parent:s});return c.status==="aborted"?I:c.status==="dirty"||t.value==="dirty"?Me(c.value):c}}if(i.type==="refinement"){const a=c=>{const u=i.refinement(c,r);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?I:(c.status==="dirty"&&t.dirty(),a(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>c.status==="aborted"?I:(c.status==="dirty"&&t.dirty(),a(c.value).then(()=>({status:t.value,value:c.value}))))}if(i.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Xe(a))return a;const c=i.transform(a.value,r);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Xe(a)?Promise.resolve(i.transform(a.value,r)).then(c=>({status:t.value,value:c})):a);V.assertNever(i)}}pe.create=(n,e,t)=>new pe({schema:n,typeName:E.ZodEffects,effect:e,...L(t)});pe.createWithPreprocess=(n,e,t)=>new pe({schema:e,effect:{type:"preprocess",transform:n},typeName:E.ZodEffects,...L(t)});class ve extends j{_parse(e){return this._getType(e)===C.undefined?re(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ve.create=(n,e)=>new ve({innerType:n,typeName:E.ZodOptional,...L(e)});class Ie extends j{_parse(e){return this._getType(e)===C.null?re(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(n,e)=>new Ie({innerType:n,typeName:E.ZodNullable,...L(e)});class ut extends j{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===C.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ut.create=(n,e)=>new ut({innerType:n,typeName:E.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...L(e)});class dt extends j{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return et(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ce(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ce(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}dt.create=(n,e)=>new dt({innerType:n,typeName:E.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...L(e)});class It extends j{_parse(e){if(this._getType(e)!==C.nan){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.nan,received:s.parsedType}),I}return{status:"valid",value:e.data}}}It.create=n=>new It({typeName:E.ZodNaN,...L(n)});const si=Symbol("zod_brand");class fs extends j{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class gt extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?I:r.status==="dirty"?(t.dirty(),Me(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?I:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,t){return new gt({in:e,out:t,typeName:E.ZodPipeline})}}class ht extends j{_parse(e){const t=this._def.innerType._parse(e),s=i=>(Xe(i)&&(i.value=Object.freeze(i.value)),i);return et(t)?t.then(i=>s(i)):s(t)}unwrap(){return this._def.innerType}}ht.create=(n,e)=>new ht({innerType:n,typeName:E.ZodReadonly,...L(e)});function on(n,e={},t){return n?Ze.create().superRefine((s,i)=>{var r,a;if(!n(s)){const c=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,u=(a=(r=c.fatal)!==null&&r!==void 0?r:t)!==null&&a!==void 0?a:!0,h=typeof c=="string"?{message:c}:c;i.addIssue({code:"custom",...h,fatal:u})}}):Ze.create()}const ni={object:G.lazycreate};var E;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(E||(E={}));const ii=(n,e={message:`Input not instance of ${n.name}`})=>on(t=>t instanceof n,e),cn=de.create,ln=Ce.create,ri=It.create,ai=Te.create,un=tt.create,oi=Re.create,ci=Ct.create,li=st.create,ui=nt.create,di=Ze.create,hi=Oe.create,pi=ke.create,fi=Tt.create,gi=he.create,mi=G.create,vi=G.strictCreate,bi=it.create,yi=Mt.create,wi=rt.create,xi=ye.create,_i=at.create,Si=Et.create,ki=Le.create,Ai=ze.create,Ci=ot.create,Ti=ct.create,Ei=Ee.create,Ii=lt.create,Pi=Be.create,Is=pe.create,Oi=ve.create,Ri=Ie.create,Li=pe.createWithPreprocess,Ni=gt.create,ji=()=>cn().optional(),Di=()=>ln().optional(),$i=()=>un().optional(),Mi={string:n=>de.create({...n,coerce:!0}),number:n=>Ce.create({...n,coerce:!0}),boolean:n=>tt.create({...n,coerce:!0}),bigint:n=>Te.create({...n,coerce:!0}),date:n=>Re.create({...n,coerce:!0})},Ui=I;var v=Object.freeze({__proto__:null,defaultErrorMap:Fe,setErrorMap:Un,getErrorMap:St,makeIssue:kt,EMPTY_PATH:Vn,addIssueToContext:A,ParseStatus:te,INVALID:I,DIRTY:Me,OK:re,isAborted:is,isDirty:rs,isValid:Xe,isAsync:et,get util(){return V},get objectUtil(){return ns},ZodParsedType:C,getParsedType:Ae,ZodType:j,datetimeRegex:rn,ZodString:de,ZodNumber:Ce,ZodBigInt:Te,ZodBoolean:tt,ZodDate:Re,ZodSymbol:Ct,ZodUndefined:st,ZodNull:nt,ZodAny:Ze,ZodUnknown:Oe,ZodNever:ke,ZodVoid:Tt,ZodArray:he,ZodObject:G,ZodUnion:it,ZodDiscriminatedUnion:Mt,ZodIntersection:rt,ZodTuple:ye,ZodRecord:at,ZodMap:Et,ZodSet:Le,ZodFunction:ze,ZodLazy:ot,ZodLiteral:ct,ZodEnum:Ee,ZodNativeEnum:lt,ZodPromise:Be,ZodEffects:pe,ZodTransformer:pe,ZodOptional:ve,ZodNullable:Ie,ZodDefault:ut,ZodCatch:dt,ZodNaN:It,BRAND:si,ZodBranded:fs,ZodPipeline:gt,ZodReadonly:ht,custom:on,Schema:j,ZodSchema:j,late:ni,get ZodFirstPartyTypeKind(){return E},coerce:Mi,any:di,array:gi,bigint:ai,boolean:un,date:oi,discriminatedUnion:yi,effect:Is,enum:Ei,function:Ai,instanceof:ii,intersection:wi,lazy:Ci,literal:Ti,map:Si,nan:ri,nativeEnum:Ii,never:pi,null:ui,nullable:Ri,number:ln,object:mi,oboolean:$i,onumber:Di,optional:Oi,ostring:ji,pipeline:Ni,preprocess:Li,promise:Pi,record:_i,set:ki,strictObject:vi,string:cn,symbol:ci,transformer:Is,tuple:xi,undefined:li,union:bi,unknown:hi,void:fi,NEVER:Ui,ZodIssueCode:x,quotelessJson:Mn,ZodError:ce});class le{constructor(e){this.schema=e}getDefaultValue(){return this.schema._def.defaultValue()}validate(e){return this.schema.safeParse(e).success}safeParse(e){return this.schema.safeParse(e)}safeParseWithDefaults(e){const t=this.safeParse(e),s=this.getDefaultValue();return t.success?Object.assign(s,t.data):s}getPropDescription(e){return this.schema._def.innerType.shape[e].description}}class ic{constructor(e){z(this,"type");z(this,"available",!1);z(this,"bootResolve");z(this,"bootReject");z(this,"bootPromise");this.type=e,this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((t,s)=>{this.bootResolve=()=>{this.available=!0,t()},this.bootReject=()=>{this.available=!1,s()}})}}const Vi=v.object({group:v.number(),slug:v.string()}),zi=v.object({experiment:Vi.optional().describe(D.session)}).default({}),Fi=new le(zi);class Zi extends ae{constructor(t){super();z(this,"services",new Map);this.analyticsStateStorage=t}async boot(){await this.analyticsStateStorage.sync(),this.bootResolve(),await this.bootPromise}get experiment(){return this.analyticsStateStorage.state.experiment??null}use(t){this.services.has(t.type)||this.services.set(t.type,t)}sendEvent(t){const s=this.services.get(t.type);s==null||s.send(t).catch(()=>{})}async setExperiment(t){await this.analyticsStateStorage.setItems({experiment:t})}}const Bi=new ie("analytics",Fi),mt=new Zi(Bi),Yt="https://veepn.com/",Ps="udid",Wi=["local","cookie","new"],Ki=v.object({type:v.enum(Wi),value:v.string()}),qi=v.object({width:v.number(),height:v.number()}),Hi=v.object({appInstallationDate:v.number().optional().describe(D.persist),deviceScreen:qi.describe(D.persist),criticalError:v.boolean().describe(D.persist),udid:Ki.describe(D.persist),hasInternetConnection:v.boolean().describe(D.session)}).default({deviceScreen:{width:0,height:0},criticalError:!1,udid:{type:"new",value:""},hasInternetConnection:navigator.onLine}),Ji=new le(Hi);class Gi extends ae{constructor(t){super();z(this,"glogalBootResolve");z(this,"appBooted");this.globalStateStorage=t,this.glogalBootResolve=()=>{},this.appBooted=new Promise(s=>{this.glogalBootResolve=s})}get udid(){return this.globalStateStorage.state.udid}get criticalError(){return this.globalStateStorage.state.criticalError}get hasInternetConnection(){return this.globalStateStorage.state.hasInternetConnection}get appInstallationDate(){return this.globalStateStorage.state.appInstallationDate??0}get deviceScreen(){return this.globalStateStorage.state.deviceScreen}async boot(){await this.globalStateStorage.sync(),this.globalStateStorage.state.appInstallationDate||await this.setAppInstallationDate(Date.now());const t=await this.generateUdid();await this.setUdid(t),this.bootResolve(),await this.bootPromise}globalboot(){this.glogalBootResolve()}async setCriticalError(t){await this.globalStateStorage.setItems({criticalError:t})}async setDeviceScreenData(t){await this.globalStateStorage.setItems({deviceScreen:t})}async setAppInstallationDate(t){await this.globalStateStorage.setItems({appInstallationDate:t})}async setUdid(t){await this.setCookiesUdid(t.value),await this.globalStateStorage.setItems({udid:t})}async setHasInternetConnection(t){await this.globalStateStorage.setItems({hasInternetConnection:t})}async generateUdid(){const{udid:t}=await this.globalStateStorage.getItems("udid");if(t.value)return{type:"local",value:t.value};const s=await B.cookies.get({url:Yt,name:"udid"});return s!=null&&s.value?{type:"cookie",value:s.value}:{type:"new",value:Xs()}}async setCookiesUdid(t){const s=new URL(Yt),i=new Date;i.setFullYear(i.getFullYear()+1),await B.cookies.set({name:Ps,value:t,url:s.href,domain:`.${s.hostname}`,expirationDate:i.getTime()/1e3})}async getCookiesUdid(){const t=new URL(Yt),s=await B.cookies.get({name:Ps,url:t.href});return s==null?void 0:s.value}}const Yi=new ie("global-state",Ji),Ut=new Gi(Yi),Os="chrome",Rs="app",Ls="chrome_extension",Qt={home:"https://veepn.com/",pricing:"https://order.veepn.com/pricing/extension/",install:`https://veepn.com/welcome/${Os}/`,uninstall:`https://veepn.com/uninstall/${Os}/1/`,ipDetails:"https://veepn.com/what-is-my-ip/",support:"https://support.veepn.com/",privacyPolicy:"https://veepn.com/privacy-policy/",termsOfService:"https://veepn.com/terms-of-service/",accountAuth:"https://veepn.com/account-auth/",update:"https://veepn.com/upgrade/"};class Qi extends ae{constructor(e){super(),this.globalStateService=e}async boot(){const e=this.globalStateService.udid.value;await this.setUninstallURL(e),this.bootResolve(),await this.bootPromise}async proceedToWebsiteAccount(e){await Promise.resolve(this);const t=`${Qt.accountAuth}${e.authToken}/`;await B.tabs.create({url:t})}async proceedToWebsitePage(e){await Promise.resolve(this);const t={utm_source:Ls,utm_medium:Rs,platform:"extension",udid:this.globalStateService.udid.value,...e.params??{}},s=new URL(Qt[e.page]);Object.entries(t).forEach(([i,r])=>{s.searchParams.set(i,r)}),await B.tabs.create({url:s.toString()})}async setUninstallURL(e){await Promise.resolve(this);const t={utm_source:Ls,utm_medium:Rs,utm_campaign:e},s=new URL(Qt.uninstall);Object.entries(t).forEach(([i,r])=>{s.searchParams.set(i,r)}),await B.runtime.setUninstallURL(s.toString())}}const Xi=new Qi(Ut);function er(n){return!!(typeof n=="object"&&n!==null&&"errors"in n&&Array.isArray(n.errors))}function tr(n){return typeof n=="object"&&n!==null&&"success"in n&&"data"in n}function sr(n){return typeof n=="object"&&n!==null&&"name"in n&&"message"in n&&"code"in n}class Se{constructor(){z(this,"ABORT_FETCH_TIME",5e3)}async request(e){try{const t=new AbortController,s=e.timeout??this.ABORT_FETCH_TIME,i=setTimeout(()=>t.abort(),s),r=await fetch(e.url,{signal:t.signal,method:e.method,headers:{Accept:"application/json","Content-Type":"application/json",...e.headers??{}},...e.body?{body:JSON.stringify(e.body)}:{}});if(clearTimeout(i),!r.ok)throw r;const a=r.headers.get("content-type"),c=a!=null&&a.includes("application/json")?await r.json():await r.text();return tr(c)?c:{success:!0,data:c}}catch(t){if(t instanceof Response)try{const s=await t.json();return er(s)?s:{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${t.statusText}`,status:t.status,code:1}]}}catch{return{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${t.statusText}`,status:t.status,code:2}]}}return sr(t)?{success:!1,errors:[{name:t.name,message:"Server take long time to response. Please, try again or contact us for assistance.",status:0,code:t.code}]}:{success:!1,errors:[{name:"custom",message:`Fetch error at ${e.url}`,status:0,code:4}]}}}static getStatusCodeMessage(e){var s,i,r,a;return(((s=e.errors[0])==null?void 0:s.status)||((i=e.errors[0])==null?void 0:i.message)||((r=e.errors[0])==null?void 0:r.name)||((a=e.errors[0])==null?void 0:a.code)||"unknown").toString()}}const Vt=new Se,dn="default",nr=[dn,"light","dark"],ir=14*24*60*60*1e3,rr="app",ar="chrome_extension",or={macos:"https://download.veepn.com/mac/VeePN.dmg",windows:"https://download.veepn.com/windows/VeePNInstaller.exe",linux:"https://veepn.com/vpn-apps/vpn-for-linux/",other:`https://order.veepn.com/pricing/extension/?utm_source=${ar}&utm_medium=${rr}&utm_campaign=download`},cr=7*24*60*60*1e3,lr="https://www.cloudflare.com/cdn-cgi/trace",ur=20*60*1e3,dr=7*24*60*60*1e3,hr=4,pr="https://chromewebstore.google.com/detail/free-vpn-for-chrome-vpn-p/_runtime_id_/reviews",fr=v.object({country:v.string(),region:v.string()}),gr=v.object({needShow:v.boolean(),nextTimestamp:v.number(),showCount:v.number()}),mr=v.object({colorTheme:v.enum(nr).describe(D.persist),showOnboarding:v.boolean().describe(D.persist),sessionCount:v.number().describe(D.persist),premiumBannerTimestamp:v.number().describe(D.persist),downloadNotificationTimestamp:v.number().describe(D.persist),geolocation:fr.optional().describe(D.persist),blockAds:v.boolean().describe(D.persist),rateUs:gr.describe(D.persist)}).default({colorTheme:dn,showOnboarding:!0,sessionCount:0,premiumBannerTimestamp:0,downloadNotificationTimestamp:0,blockAds:!1,rateUs:{needShow:!0,nextTimestamp:Date.now()+ur,showCount:1}}),vr=new le(mr);var os={exports:{}};(function(n,e){(function(t,s){var i="1.0.38",r="",a="?",c="function",u="undefined",h="object",g="string",w="major",d="model",f="name",o="type",l="vendor",p="version",m="architecture",y="console",b="mobile",_="tablet",U="smarttv",S="wearable",k="embedded",N=500,$="Amazon",K="Apple",Y="ASUS",X="BlackBerry",P="Browser",J="Chrome",q="Edge",ee="Firefox",oe="Google",W="Huawei",ne="LG",we="Microsoft",We="Motorola",Ke="Opera",vt="Samsung",ys="Sharp",bt="Sony",Bt="Xiaomi",Wt="Zebra",ws="Facebook",xs="Chromium OS",_s="Mac OS",Cn=function(M,Z){var R={};for(var H in M)Z[H]&&Z[H].length%2===0?R[H]=Z[H].concat(M[H]):R[H]=M[H];return R},yt=function(M){for(var Z={},R=0;R<M.length;R++)Z[M[R].toUpperCase()]=M[R];return Z},Ss=function(M,Z){return typeof M===g?qe(Z).indexOf(qe(M))!==-1:!1},qe=function(M){return M.toLowerCase()},Tn=function(M){return typeof M===g?M.replace(/[^\d\.]/g,r).split(".")[0]:s},Kt=function(M,Z){if(typeof M===g)return M=M.replace(/^\s\s*/,r),typeof Z===u?M:M.substring(0,N)},He=function(M,Z){for(var R=0,H,xe,fe,F,O,ge;R<Z.length&&!O;){var Ht=Z[R],Cs=Z[R+1];for(H=xe=0;H<Ht.length&&!O&&Ht[H];)if(O=Ht[H++].exec(M),O)for(fe=0;fe<Cs.length;fe++)ge=O[++xe],F=Cs[fe],typeof F===h&&F.length>0?F.length===2?typeof F[1]==c?this[F[0]]=F[1].call(this,ge):this[F[0]]=F[1]:F.length===3?typeof F[1]===c&&!(F[1].exec&&F[1].test)?this[F[0]]=ge?F[1].call(this,ge,F[2]):s:this[F[0]]=ge?ge.replace(F[1],F[2]):s:F.length===4&&(this[F[0]]=ge?F[3].call(this,ge.replace(F[1],F[2])):s):this[F]=ge||s;R+=2}},qt=function(M,Z){for(var R in Z)if(typeof Z[R]===h&&Z[R].length>0){for(var H=0;H<Z[R].length;H++)if(Ss(Z[R][H],M))return R===a?s:R}else if(Ss(Z[R],M))return R===a?s:R;return M},En={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ks={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},As={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,p],[/opios[\/ ]+([\w\.]+)/i],[p,[f,Ke+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[f,Ke+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[f,Ke]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[f,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,p],[/\bddg\/([\w\.]+)/i],[p,[f,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[f,"UC"+P]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[f,"Smart Lenovo "+P]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+P],p],[/\bfocus\/([\w\.]+)/i],[p,[f,ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[f,Ke+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[f,Ke+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[f,"MIUI "+P]],[/fxios\/([-\w\.]+)/i],[p,[f,ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+P]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+P],p],[/samsungbrowser\/([\w\.]+)/i],[p,[f,vt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[f,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,ws],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[f,J+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,J+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[f,"Android "+P]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[p,qt,En]],[/(webkit|khtml)\/([\w\.]+)/i],[f,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[f,ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,p],[/(cobalt)\/([\w\.]+)/i],[f,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,qe]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,r,qe]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,qe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[l,vt],[o,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[l,vt],[o,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[l,K],[o,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[l,K],[o,_]],[/(macintosh);/i],[d,[l,K]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[l,ys],[o,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[l,W],[o,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[l,W],[o,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[l,Bt],[o,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[l,Bt],[o,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[l,"OPPO"],[o,b]],[/\b(opd2\d{3}a?) bui/i],[d,[l,"OPPO"],[o,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[l,"Vivo"],[o,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[l,"Realme"],[o,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[l,We],[o,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[l,We],[o,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[l,ne],[o,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[l,ne],[o,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[l,"Lenovo"],[o,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[l,"Nokia"],[o,b]],[/(pixel c)\b/i],[d,[l,oe],[o,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[l,oe],[o,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[l,bt],[o,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[l,bt],[o,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[l,"OnePlus"],[o,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[l,$],[o,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[l,$],[o,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,l,[o,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[l,X],[o,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[l,Y],[o,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[l,Y],[o,b]],[/(nexus 9)/i],[d,[l,"HTC"],[o,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[d,/_/g," "],[o,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[l,"Acer"],[o,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[l,"Meizu"],[o,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[l,"Ulefone"],[o,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,d,[o,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,d,[o,_]],[/(surface duo)/i],[d,[l,we],[o,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[l,"Fairphone"],[o,b]],[/(u304aa)/i],[d,[l,"AT&T"],[o,b]],[/\bsie-(\w*)/i],[d,[l,"Siemens"],[o,b]],[/\b(rct\w+) b/i],[d,[l,"RCA"],[o,_]],[/\b(venue[\d ]{2,7}) b/i],[d,[l,"Dell"],[o,_]],[/\b(q(?:mv|ta)\w+) b/i],[d,[l,"Verizon"],[o,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[l,"Barnes & Noble"],[o,_]],[/\b(tm\d{3}\w+) b/i],[d,[l,"NuVision"],[o,_]],[/\b(k88) b/i],[d,[l,"ZTE"],[o,_]],[/\b(nx\d{3}j) b/i],[d,[l,"ZTE"],[o,b]],[/\b(gen\d{3}) b.+49h/i],[d,[l,"Swiss"],[o,b]],[/\b(zur\d{3}) b/i],[d,[l,"Swiss"],[o,_]],[/\b((zeki)?tb.*\b) b/i],[d,[l,"Zeki"],[o,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],d,[o,_]],[/\b(ns-?\w{0,9}) b/i],[d,[l,"Insignia"],[o,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[l,"NextBook"],[o,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],d,[o,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],d,[o,b]],[/\b(ph-1) /i],[d,[l,"Essential"],[o,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[l,"Envizen"],[o,_]],[/\b(trio[-\w\. ]+) b/i],[d,[l,"MachSpeed"],[o,_]],[/\btu_(1491) b/i],[d,[l,"Rotor"],[o,_]],[/(shield[\w ]+) b/i],[d,[l,"Nvidia"],[o,_]],[/(sprint) (\w+)/i],[l,d,[o,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[l,we],[o,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[l,Wt],[o,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[l,Wt],[o,b]],[/smart-tv.+(samsung)/i],[l,[o,U]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[l,vt],[o,U]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,ne],[o,U]],[/(apple) ?tv/i],[l,[d,K+" TV"],[o,U]],[/crkey/i],[[d,J+"cast"],[l,oe],[o,U]],[/droid.+aft(\w+)( bui|\))/i],[d,[l,$],[o,U]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[l,ys],[o,U]],[/(bravia[\w ]+)( bui|\))/i],[d,[l,bt],[o,U]],[/(mitv-\w{5}) bui/i],[d,[l,Bt],[o,U]],[/Hbbtv.*(technisat) (.*);/i],[l,d,[o,U]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,Kt],[d,Kt],[o,U]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[o,U]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,d,[o,y]],[/droid.+; (shield) bui/i],[d,[l,"Nvidia"],[o,y]],[/(playstation [345portablevi]+)/i],[d,[l,bt],[o,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[l,we],[o,y]],[/((pebble))app/i],[l,d,[o,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[l,K],[o,S]],[/droid.+; (glass) \d/i],[d,[l,oe],[o,S]],[/droid.+; (wt63?0{2,3})\)/i],[d,[l,Wt],[o,S]],[/(quest( \d| pro)?)/i],[d,[l,ws],[o,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[o,k]],[/(aeobc)\b/i],[d,[l,$],[o,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[o,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[o,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[o,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[o,b]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[f,q+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[f,[p,qt,ks]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,qt,ks],[f,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,_s],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,p],[/\(bb(10);/i],[p,[f,X]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[f,ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[f,J+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,xs],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,p],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,p]]},ue=function(M,Z){if(typeof M===h&&(Z=M,M=s),!(this instanceof ue))return new ue(M,Z).getResult();var R=typeof t!==u&&t.navigator?t.navigator:s,H=M||(R&&R.userAgent?R.userAgent:r),xe=R&&R.userAgentData?R.userAgentData:s,fe=Z?Cn(As,Z):As,F=R&&R.userAgent==H;return this.getBrowser=function(){var O={};return O[f]=s,O[p]=s,He.call(O,H,fe.browser),O[w]=Tn(O[p]),F&&R&&R.brave&&typeof R.brave.isBrave==c&&(O[f]="Brave"),O},this.getCPU=function(){var O={};return O[m]=s,He.call(O,H,fe.cpu),O},this.getDevice=function(){var O={};return O[l]=s,O[d]=s,O[o]=s,He.call(O,H,fe.device),F&&!O[o]&&xe&&xe.mobile&&(O[o]=b),F&&O[d]=="Macintosh"&&R&&typeof R.standalone!==u&&R.maxTouchPoints&&R.maxTouchPoints>2&&(O[d]="iPad",O[o]=_),O},this.getEngine=function(){var O={};return O[f]=s,O[p]=s,He.call(O,H,fe.engine),O},this.getOS=function(){var O={};return O[f]=s,O[p]=s,He.call(O,H,fe.os),F&&!O[f]&&xe&&xe.platform&&xe.platform!="Unknown"&&(O[f]=xe.platform.replace(/chrome os/i,xs).replace(/macos/i,_s)),O},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return H},this.setUA=function(O){return H=typeof O===g&&O.length>N?Kt(O,N):O,this},this.setUA(H),this};ue.VERSION=i,ue.BROWSER=yt([f,p,w]),ue.CPU=yt([m]),ue.DEVICE=yt([d,l,o,y,b,U,_,S,k]),ue.ENGINE=ue.OS=yt([f,p]),n.exports&&(e=n.exports=ue),e.UAParser=ue;var Ne=typeof t!==u&&(t.jQuery||t.Zepto);if(Ne&&!Ne.ua){var wt=new ue;Ne.ua=wt.getResult(),Ne.ua.get=function(){return wt.getUA()},Ne.ua.set=function(M){wt.setUA(M);var Z=wt.getResult();for(var R in Z)Ne.ua[R]=Z[R]}}})(typeof window=="object"?window:ps)})(os,os.exports);var gs=os.exports;const br=gs.UAParser();class yr extends ae{constructor(e,t,s){super(),this.appStorage=e,this.fetchService=t,this.analyticsService=s}get colorTheme(){return this.appStorage.state.colorTheme}get version(){return B.runtime.getManifest().version}get showOnboarding(){return this.appStorage.state.showOnboarding}get sessionCount(){return this.appStorage.state.sessionCount}get premiumBannerTimestamp(){return this.appStorage.state.premiumBannerTimestamp}get downloadNotificationTimestamp(){return this.appStorage.state.downloadNotificationTimestamp}get geolocation(){return this.appStorage.state.geolocation??null}get isBlockAds(){return this.appStorage.state.blockAds}get majorBrowserVersion(){const e=Number(br.browser.major);return Number.isNaN(e)?0:e}get rateUsData(){return this.appStorage.state.rateUs}get extensionStoreUrl(){const e=B.runtime.id;return pr.replace("_runtime_id_",e)}async boot(){await this.appStorage.sync(),this.appStorage.state.premiumBannerTimestamp===0&&await this.incrementPremiumBannerTimestamp(),this.appStorage.state.geolocation||await this.detectGeolocation(),this.bootResolve(),await this.bootPromise}async setColorTheme(e){await this.appStorage.setItems({colorTheme:e})}async setShowOnboarding(e){await this.appStorage.setItems({showOnboarding:e})}async incrementSessionCount(){const e=this.appStorage.state.sessionCount+1;await this.appStorage.setItems({sessionCount:e})}async incrementPremiumBannerTimestamp(){const e=Date.now()+ir;await this.appStorage.setItems({premiumBannerTimestamp:e})}async getDownloadLink(e){return await Promise.resolve(this),or[e]}async incrementDownloadNotificationTimestamp(){const e=Date.now()+cr;await this.appStorage.setItems({downloadNotificationTimestamp:e})}async detectGeolocation(){const e=await this.fetchService.request({method:"GET",url:lr});if(e.success)try{const t=e.data.trim().split(/\n/).map(r=>r.split("=")),s=Object.fromEntries(t),i={country:s.loc.toLocaleLowerCase(),region:s.colo.toLocaleLowerCase()};await this.appStorage.setItems({geolocation:i}),this.analyticsService.sendEvent({type:"google-analytics",name:"setup_user_country",data:{user_country:i.country}}),this.analyticsService.sendEvent({type:"amplitude",name:"setup_user_country",data:{user_country:i.country}})}catch{this.analyticsService.sendEvent({type:"google-analytics",name:"country_check_failed_error"}),this.analyticsService.sendEvent({type:"amplitude",name:"country_check_failed_error"})}else this.analyticsService.sendEvent({type:"google-analytics",name:"country_check_failed"}),this.analyticsService.sendEvent({type:"amplitude",name:"country_check_failed"})}async setBlockAds(e){await this.appStorage.setItems({blockAds:e})}async incrementRateUs(){const e={needShow:this.rateUsData.showCount<hr,nextTimestamp:Date.now()+dr,showCount:this.rateUsData.showCount+1};await this.appStorage.setItems({rateUs:e})}}const wr=new ie("app",vr),xr=new yr(wr,Vt,mt),_r=["allowed","denied"],Sr="allowed",kr="/icons/128.png",Ar=["download-app","extension-updated"],Cr=v.object({id:v.string().uuid(),callback:v.enum(Ar).optional()}),Tr=v.object({permition:v.enum(_r).describe(D.persist),callbacks:v.array(Cr).optional().describe(D.session)}).default({permition:Sr}),Er=new le(Tr);class Ir extends ae{constructor(e){super(),this.notificationStorage=e}get permition(){return this.notificationStorage.state.permition}get callbacks(){return this.notificationStorage.state.callbacks??[]}async boot(){await this.notificationStorage.sync(),this.bootResolve(),await this.bootPromise}async setNotificationPermition(e){await this.notificationStorage.setItems({permition:e})}getCallbackSettings(e){return this.callbacks.find(s=>s.id===e)??null}async removeCallbackSettings(e){const s=((await this.notificationStorage.getItems("callbacks")).callbacks??[]).filter(i=>i.id!==e);await this.notificationStorage.setItems({callbacks:s})}async notify(e){if(this.notificationStorage.state.permition==="denied")return;const t=B.runtime.getManifest(),s=B.runtime.getURL(kr),i={type:"basic",title:t.name,message:t.description??"",iconUrl:s},r=await B.notifications.create(Xs(),{...i,...e.options}),a=[...this.callbacks,{id:r,...e.callback?{callback:e.callback}:{}}];await this.notificationStorage.setItems({callbacks:a})}}const Pr=new ie("notification",Er),Or=new Ir(Pr),hn=["en","ru","vi","uk","pl","no","it","he","fr","fi","nl","da","bg","es","de","zh_CN","ar","hi","bn","ta"],Xt="en",Rr=new Map([["en","English"],["ru",""],["vi","Ting Vit"],["uk",""],["pl","Polskie"],["no","Norsk"],["it","Italiano"],["he",""],["fr","Franais"],["fi","Suomalainen"],["nl","Nederlands"],["da","Dansk"],["bg",""],["es","Espaol"],["de","Deutsche"],["zh_CN",""],["ar",""],["hi",""],["bn",""],["ta",""]]),Lr=v.object({locale:v.enum(hn).optional().describe(D.persist)}).default({}),Nr=new le(Lr);function Ns(n){return!!(n&&typeof n=="string"&&hn.includes(n))}const jr={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"     .","not-controllable":"       .","no-location":"     .","server-config":"       .",captive:"      .","no-internet":"      ."},"disconnect-errors":{"remove-proxy":"        ."},"download-notification":{title:"  VPN  ",message:"      "},"update-notification":{title:"  ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"      .","not-controllable":"          .","remove-webrtc":"    WebRTC."}},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),$r={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  , ,   .","not-controllable":"  ,        .","no-location":"  ,    .","server-config":"  ,        .",captive:"  ,       .","no-internet":"  ,   ."},"disconnect-errors":{"remove-proxy":"    ,      ."},"download-notification":{title:"      VPN",message:"     ,     "},"update-notification":{title:"  ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":",    .","not-controllable":"          .","remove-webrtc":"       WebRTC."}},Mr=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"})),Ur={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  ,      ","not-controllable":"  ,    ","no-location":" ,   .","server-config":" ,     ",captive:"  ,      ","no-internet":" ,    ."},"disconnect-errors":{"remove-proxy":"  ,     "},"download-notification":{title:"     ",message:"  ,      "},"update-notification":{title:"   ",message:" {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"    ","not-controllable":"      ","remove-webrtc":"WebRTC     "}},Vr=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),zr={"connect-status":{off:"Du er ikke forbundet",on:"Du er forbundet til {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Forbindelsen mislykkedes. Deaktiver venligst andre udvidelser.","not-controllable":"Forbindelsen mislykkedes, browserproxy kan ikke kontrolleres.","no-location":"Forbindelsesfejl, manglende forbindelsesplacering.","server-config":"Forbindelsesfejl, serverkonfigurationen kan ikke hentes.",captive:"Forbindelsen mislykkedes, kan ikke oprette proxyforbindelse.","no-internet":"Forbindelsesfejl, ingen netvrksforbindelse."},"disconnect-errors":{"remove-proxy":"Afbrydelsesfejl, fjernelse af proxyregler mislykkedes."},"download-notification":{title:"Prv vores VPN-klient til skrivebordet",message:"Beskyt hele din internetforbindelse, ikke kun browseren"},"update-notification":{title:"Udvidelse opdateret",message:"Velkommen til {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Indstilling kontrolleret af anden udvidelse.","not-controllable":"Indstillingen kan ikke kontrolleres via dine browserindstillinger.","remove-webrtc":"Kan ikke rydde WebRTC-indstillinger."}},Fr=Object.freeze(Object.defineProperty({__proto__:null,default:zr},Symbol.toStringTag,{value:"Module"})),Zr={"connect-status":{off:"Sie sind nicht verbunden",on:"Sie sind mit {{tr_location}} verbunden"},"connect-errors":{"controlled-by-other-extensions":"Die Verbindung ist fehlgeschlagen. Bitte deaktivieren Sie andere Erweiterungen.","not-controllable":"Verbindung fehlgeschlagen, Browser-Proxy ist nicht steuerbar.","no-location":"Verbindungsfehler, Verbindungsstandort fehlt.","server-config":"Verbindungsfehler, Serverkonfiguration kann nicht abgerufen werden.",captive:"Verbindung fehlgeschlagen, Proxy-Verbindung kann nicht hergestellt werden.","no-internet":"Verbindungsfehler, keine Netzwerkverbindung."},"disconnect-errors":{"remove-proxy":"Fehler beim Trennen der Verbindung. Das Entfernen der Proxy-Regeln ist fehlgeschlagen."},"download-notification":{title:"Testen Sie unseren Desktop VPN Client",message:"Schtzen Sie Ihre gesamte Internetverbindung, nicht nur den Browser"},"update-notification":{title:"Erweiterung aktualisiert",message:"Willkommen zu {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Einstellung wird von einer anderen Nebenstelle gesteuert.","not-controllable":"Die Einstellung kann nicht ber Ihre Browsereinstellungen gesteuert werden.","remove-webrtc":"WebRTC-Einstellungen knnen nicht gelscht werden."}},Br=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),Wr={"connect-status":{off:"You are not connected",on:"You are connected to {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connection failed. Please disable other extensions.","not-controllable":"Connection failed. Browser proxy is not controllable.","no-location":"Connection Error. Missing connection location.","server-config":"Connection Error. Can't fetch server config.",captive:"Connection failed. Cannot establish proxy connection.","no-internet":"Connection Error. No Network connection."},"disconnect-errors":{"remove-proxy":"Disconnect Error. Proxy rules remove failed."},"download-notification":{title:"Try our Desktop VPN Client",message:"Protect your entire internet connection, not just browser"},"update-notification":{title:"Extension updated",message:"Welcome to {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Setting controlled by other extension.","not-controllable":"Setting not controllable through your browser settings.","remove-webrtc":"Can't clear WebRTC settings."}},Kr=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"})),qr={"connect-status":{off:"No est conectado",on:"Ests conectado a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La conexin fall. Desactive otras extensiones.","not-controllable":"La conexin fall, el proxy del navegador no es controlable.","no-location":"Error de conexin, falta ubicacin de conexin.","server-config":"Error de conexin, no se puede recuperar la configuracin del servidor.",captive:"La conexin fall, no se puede establecer la conexin proxy.","no-internet":"Error de conexin, sin conexin de red."},"disconnect-errors":{"remove-proxy":"Error de desconexin, error al eliminar las reglas de proxy."},"download-notification":{title:"Pruebe nuestro cliente VPN de escritorio",message:"Proteja toda su conexin a Internet, no slo el navegador"},"update-notification":{title:"Extensin actualizada",message:"Bienvenido a {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Configuracin controlada por otra extensin.","not-controllable":"Configuracin no controlable a travs de la configuracin de su navegador.","remove-webrtc":"No se puede borrar la configuracin de WebRTC."}},Hr=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),Jr={"connect-status":{off:"Et ole yhteydess",on:"Olet yhteydess {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Yhteys eponnistui. Poista muut laajennukset kytst.","not-controllable":"Yhteys eponnistui, selaimen vlityspalvelinta ei voida ohjata.","no-location":"Yhteysvirhe, yhteyspaikka puuttuu.","server-config":"Yhteysvirhe, palvelimen konfiguraatiota ei voi noutaa.",captive:"Yhteys eponnistui, vlityspalvelinyhteytt ei voi muodostaa.","no-internet":"Yhteysvirhe, ei verkkoyhteytt."},"disconnect-errors":{"remove-proxy":"Yhteyden katkaisuvirhe, vlityspalvelimen sntjen poistaminen eponnistui."},"download-notification":{title:"Kokeile typydn VPN-asiakasta",message:"Suojaa koko internet-yhteys, ei vain selainta."},"update-notification":{title:"Laajennus pivitetty",message:"Tervetuloa {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Asetusta ohjaa toinen laajennus.","not-controllable":"Asetusta ei voi hallita selaimesi asetuksista.","remove-webrtc":"WebRTC-asetuksia ei voi tyhjent."}},Gr=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Yr={"connect-status":{off:"Vous n'tes pas connect",on:"Vous tes connect  {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La connexion a chou. Veuillez dsactiver les autres extensions.","not-controllable":"La connexion a chou, le proxy du navigateur n'est pas contrlable.","no-location":"Erreur de connexion, emplacement de connexion manquant.","server-config":"Erreur de connexion, impossible de rcuprer la configuration du serveur.",captive:"chec de la connexion, impossible d'tablir une connexion proxy.","no-internet":"Erreur de connexion, pas de connexion rseau."},"disconnect-errors":{"remove-proxy":"Erreur de dconnexion. La suppression des rgles de proxy a chou."},"download-notification":{title:"Essayez notre client VPN de bureau",message:"Protgez l'ensemble de votre connexion Internet, et pas seulement votre navigateur"},"update-notification":{title:"Extension mise  jour",message:"Bienvenue  {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Paramtre contrl par une autre extension.","not-controllable":"Paramtre non contrlable via les paramtres de votre navigateur.","remove-webrtc":"Impossible d'effacer les paramtres WebRTC."}},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),Xr={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,    .","not-controllable":" , -proxy     .","no-location":" ,   .","server-config":" ,      .",captive:" ,     proxy.","no-internet":" ,   ."},"disconnect-errors":{"remove-proxy":" ,   Proxy ."},"download-notification":{title:"   -VPN   ",message:"     ,    "},"update-notification":{title:" ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"     .","not-controllable":"       .","remove-webrtc":"     WebRTC."}},ea=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"})),ta={"connect-status":{off:"   ",on:"    {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,     ","not-controllable":" ,     ","no-location":" ,   ","server-config":" ,      ",captive:" ,       ","no-internet":" ,    ."},"disconnect-errors":{"remove-proxy":" ,     "},"download-notification":{title:"     ",message:"   ,        "},"update-notification":{title:"   ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"    .","not-controllable":"           ","remove-webrtc":"WebRTC      ."}},sa=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),na={"connect-status":{off:"Non siete connessi",on:"Sei connesso a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connessione non riuscita. Disattiva le altre estensioni.","not-controllable":"Connessione non riuscita, il proxy del browser non  controllabile.","no-location":"Errore di connessione, posizione della connessione mancante.","server-config":"Errore di connessione, impossibile recuperare la configurazione del server.",captive:"Connessione non riuscita, impossibile stabilire una connessione proxy.","no-internet":"Errore di connessione, nessuna connessione di rete."},"disconnect-errors":{"remove-proxy":"Errore di disconnessione, rimozione delle regole proxy non riuscita."},"download-notification":{title:"Provate il nostro client VPN per desktop",message:"Proteggere l'intera connessione a Internet, non solo il browser"},"update-notification":{title:"Estensione aggiornata",message:"Benvenuto a {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Impostazione controllata da un altro interno.","not-controllable":"Impostazione non controllabile tramite le impostazioni del browser.","remove-webrtc":"Impossibile cancellare le impostazioni WebRTC."}},ia=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ra={"connect-status":{off:"U bent niet verbonden",on:"Je bent verbonden met {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Verbinding mislukt. Schakel andere extensies uit.","not-controllable":"Verbinding mislukt, browserproxy kan niet worden beheerd.","no-location":"Verbindingsfout, ontbrekende verbindingslocatie.","server-config":"Verbindingsfout, kan serverconfiguratie niet ophalen.",captive:"Verbinding mislukt. Kan geen proxyverbinding tot stand brengen.","no-internet":"Verbindingsfout, geen netwerkverbinding."},"disconnect-errors":{"remove-proxy":"Verbindingsfout, verwijderen van proxyregels mislukt."},"download-notification":{title:"Probeer onze Desktop VPN-client",message:"Bescherm je hele internetverbinding, niet alleen je browser"},"update-notification":{title:"Extensie bijgewerkt",message:"Welkom bij {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Instelling beheerd door een ander toestel.","not-controllable":"Instelling kan niet worden beheerd via uw browserinstellingen.","remove-webrtc":"Kan WebRTC-instellingen niet wissen."}},aa=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"})),oa={"connect-status":{off:"Du er ikke tilkoblet",on:"Du er koblet til {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Tilkobling mislyktes. Deaktiver andre utvidelser.","not-controllable":"Tilkobling mislyktes, nettleserproxy er ikke kontrollerbar.","no-location":"Tilkoblingsfeil, manglende tilkoblingssted.","server-config":"Tilkoblingsfeil, kan ikke hente serverkonfig.",captive:"Tilkobling mislyktes. Kan ikke opprette proxy-tilkobling.","no-internet":"Tilkoblingsfeil, ingen nettverkstilkobling."},"disconnect-errors":{"remove-proxy":"Koble fra feil, fjerning av proxy-regler mislyktes."},"download-notification":{title:"Prv vr VPN-klient for skrivebordet",message:"Beskytt hele internettforbindelsen din, ikke bare nettleseren"},"update-notification":{title:"Utvidelsen er oppdatert",message:"Velkommen til {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Innstilling kontrollert av annen utvidelse.","not-controllable":"Innstillingen kan ikke kontrolleres gjennom nettleserinnstillingene.","remove-webrtc":"Kan ikke slette WebRTC-innstillingene."}},ca=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),la={"connect-status":{off:"Nie jeste poczony",on:"Jeste poczony z {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Poczenie nie powiodo si. Wycz inne rozszerzenia.","not-controllable":"Poczenie nie powiodo si, nie mona kontrolowa serwera proxy przegldarki.","no-location":"Bd poczenia, brak lokalizacji poczenia.","server-config":"Bd poczenia. Nie mona pobra konfiguracji serwera.",captive:"Poczenie nie powiodo si. Nie mona nawiza poczenia proxy.","no-internet":"Bd poczenia, brak poczenia sieciowego."},"disconnect-errors":{"remove-proxy":"Bd rozczenia, usunicie regu proxy nie powiodo si."},"download-notification":{title:"Wyprbuj naszego klienta VPN dla komputerw stacjonarnych",message:"Ochrona caego poczenia internetowego, nie tylko przegldarki"},"update-notification":{title:"Rozszerzenie zaktualizowane",message:"Witamy w {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Ustawienie kontrolowane przez inne rozszerzenie.","not-controllable":"Ustawienie, ktrego nie mona kontrolowa za pomoc ustawie przegldarki.","remove-webrtc":"Nie mona wyczyci ustawie WebRTC."}},ua=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"})),da={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  .   .","not-controllable":"  , -   .","no-location":" ,   .","server-config":" .    .",captive:"   .   -.","no-internet":" .    ."},"disconnect-errors":{"remove-proxy":" .     ."},"download-notification":{title:"   VPN-",message:"   -,    "},"update-notification":{title:" ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"   .","not-controllable":"      .","remove-webrtc":"    WebRTC."}},ha=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),pa={"connect-status":{off:" ",on:"  {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,   .","not-controllable":" ,    .","no-location":" ,   .","server-config":" ,    .",captive:" ,    .","no-internet":" ,   ."},"disconnect-errors":{"remove-proxy":" ,    ."},"download-notification":{title:"  VPN  ",message:"      "},"update-notification":{title:" ",message:" {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"    .","not-controllable":"      .","remove-webrtc":"WebRTC   ."}},fa=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),ga={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" .   .","not-controllable":" , - -  .","no-location":" ,   .","server-config":" ,     .",captive:" ,   -.","no-internet":" .   '."},"disconnect-errors":{"remove-proxy":" ,     ."},"download-notification":{title:"  VPN  ",message:"    ,     "},"update-notification":{title:" ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"   .","not-controllable":"      .","remove-webrtc":"    WebRTC."}},ma=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"})),va={"connect-status":{off:"Bn cha c kt ni",on:"Bn c kt ni vi {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Kt ni khng thnh cng, vui lng tt cc tin ch m rng khc.","not-controllable":"Kt ni khng thnh cng, proxy trnh duyt khng th kim sot c.","no-location":"Li kt ni, Thiu v tr kt ni.","server-config":"Li kt ni, Khng th tm np cu hnh my ch.",captive:"Kt ni khng thnh cng, Khng th thit lp kt ni proxy.","no-internet":"Li kt ni, Khng c kt ni mng."},"disconnect-errors":{"remove-proxy":"Li ngt kt ni, xa quy tc proxy khng thnh cng."},"download-notification":{title:"Hy dng th My khch VPN my tnh  bn ca chng ti",message:"Bo v ton b kt ni internet ca bn, khng ch trnh duyt"},"update-notification":{title:" cp nht tin ch m rng",message:"Cho mng bn n {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Ci t c kim sot bi tin ch m rng khc.","not-controllable":"Ci t khng th kim sot c thng qua ci t trnh duyt ca bn.","remove-webrtc":"Khng th xa ci t WebRTC."}},ba=Object.freeze(Object.defineProperty({__proto__:null,default:va},Symbol.toStringTag,{value:"Module"})),ya={"connect-status":{off:"",on:" {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"","not-controllable":"","no-location":"","server-config":"",captive:"","no-internet":""},"disconnect-errors":{"remove-proxy":""},"download-notification":{title:"VPN",message:""},"update-notification":{title:"",message:" {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"","not-controllable":"","remove-webrtc":" WebRTC "}},wa=Object.freeze(Object.defineProperty({__proto__:null,default:ya},Symbol.toStringTag,{value:"Module"})),xa={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class Pt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||xa,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Pt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Pt(this.logger,e)}}var me=new Pt;class zt{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[c,u]=a;for(let h=0;h<u;h++)c(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[c,u]=a;for(let h=0;h<u;h++)c.apply(c,[e,...s])})}}const Je=()=>{let n,e;const t=new Promise((s,i)=>{n=s,e=i});return t.resolve=n,t.reject=e,t},js=n=>n==null?"":""+n,_a=(n,e,t)=>{n.forEach(s=>{e[s]&&(t[s]=e[s])})},Sa=/###/g,Ds=n=>n&&n.indexOf("###")>-1?n.replace(Sa,"."):n,$s=n=>!n||typeof n=="string",Qe=(n,e,t)=>{const s=typeof e!="string"?e:e.split(".");let i=0;for(;i<s.length-1;){if($s(n))return{};const r=Ds(s[i]);!n[r]&&t&&(n[r]=new t),Object.prototype.hasOwnProperty.call(n,r)?n=n[r]:n={},++i}return $s(n)?{}:{obj:n,k:Ds(s[i])}},Ms=(n,e,t)=>{const{obj:s,k:i}=Qe(n,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let r=e[e.length-1],a=e.slice(0,e.length-1),c=Qe(n,a,Object);for(;c.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),c=Qe(n,a,Object),c&&c.obj&&typeof c.obj[`${c.k}.${r}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${r}`]=t},ka=(n,e,t,s)=>{const{obj:i,k:r}=Qe(n,e,Object);i[r]=i[r]||[],i[r].push(t)},Ot=(n,e)=>{const{obj:t,k:s}=Qe(n,e);if(t)return t[s]},Aa=(n,e,t)=>{const s=Ot(n,t);return s!==void 0?s:Ot(e,t)},pn=(n,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?typeof n[s]=="string"||n[s]instanceof String||typeof e[s]=="string"||e[s]instanceof String?t&&(n[s]=e[s]):pn(n[s],e[s],t):n[s]=e[s]);return n},je=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ta=n=>typeof n=="string"?n.replace(/[&<>"'\/]/g,e=>Ca[e]):n;class Ea{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Ia=[" ",",","?","!",";"],Pa=new Ea(20),Oa=(n,e,t)=>{e=e||"",t=t||"";const s=Ia.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const i=Pa.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!i.test(n);if(!r){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(r=!0)}return r},cs=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const s=e.split(t);let i=n;for(let r=0;r<s.length;){if(!i||typeof i!="object")return;let a,c="";for(let u=r;u<s.length;++u)if(u!==r&&(c+=t),c+=s[u],a=i[c],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&u<s.length-1)continue;r+=u-r+1;break}i=a}return i},Rt=n=>n&&n.indexOf("_")>0?n.replace("_","-"):n;class Us extends zt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,t],s&&(Array.isArray(s)?c.push(...s):typeof s=="string"&&r?c.push(...s.split(r)):c.push(s)));const u=Ot(this.data,c);return!u&&!t&&!s&&e.indexOf(".")>-1&&(e=c[0],t=c[1],s=c.slice(2).join(".")),u||!a||typeof s!="string"?u:cs(this.data&&this.data[e]&&this.data[e][t],s,r)}addResource(e,t,s,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let c=[e,t];s&&(c=c.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(c=e.split("."),i=t,t=c[1]),this.addNamespaces(t),Ms(this.data,c,i),r.silent||this.emit("added",e,t,s,i)}addResources(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in s)(typeof s[r]=="string"||Array.isArray(s[r]))&&this.addResource(e,t,r,s[r],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,t];e.indexOf(".")>-1&&(c=e.split("."),i=s,s=t,t=c[1]),this.addNamespaces(t);let u=Ot(this.data,c)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?pn(u,s,r):u={...u,...s},Ms(this.data,c,u),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var fn={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,i){return n.forEach(r=>{this.processors[r]&&(e=this.processors[r].process(e,t,s,i))}),e}};const Vs={};class Lt extends zt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),_a(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=me.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const s=this.resolve(e,t);return s&&s.res!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,c=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Oa(e,s,i);if(a&&!c){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:r};const h=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(h[0])>-1)&&(r=h.shift()),e=h.join(i)}return typeof r=="string"&&(r=[r]),{key:e,namespaces:r}}translate(e,t,s){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],t),u=c[c.length-1],h=t.lng||this.language,g=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(g){const _=t.nsSeparator||this.options.nsSeparator;return i?{res:`${u}${_}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:`${u}${_}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:a}const w=this.resolve(e,t);let d=w&&w.res;const f=w&&w.usedKey||a,o=w&&w.exactUsedKey||a,l=Object.prototype.toString.apply(d),p=["[object Number]","[object Function]","[object RegExp]"],m=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&p.indexOf(l)<0&&!(typeof m=="string"&&Array.isArray(d))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,d,{...t,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(w.res=_,w.usedParams=this.getUsedParamsDetails(t),w):_}if(r){const _=Array.isArray(d),U=_?[]:{},S=_?o:f;for(const k in d)if(Object.prototype.hasOwnProperty.call(d,k)){const N=`${S}${r}${k}`;U[k]=this.translate(N,{...t,joinArrays:!1,ns:c}),U[k]===N&&(U[k]=d[k])}d=U}}else if(y&&typeof m=="string"&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,e,t,s));else{let _=!1,U=!1;const S=t.count!==void 0&&typeof t.count!="string",k=Lt.hasDefaultValue(t),N=S?this.pluralResolver.getSuffix(h,t.count,t):"",$=t.ordinal&&S?this.pluralResolver.getSuffix(h,t.count,{ordinal:!1}):"",K=S&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),Y=K&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${N}`]||t[`defaultValue${$}`]||t.defaultValue;!this.isValidLookup(d)&&k&&(_=!0,d=Y),this.isValidLookup(d)||(U=!0,d=a);const P=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:d,J=k&&Y!==d&&this.options.updateMissing;if(U||_||J){if(this.logger.log(J?"updateKey":"missingKey",h,u,a,J?Y:d),r){const W=this.resolve(a,{...t,keySeparator:!1});W&&W.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ee&&ee[0])for(let W=0;W<ee.length;W++)q.push(ee[W]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(t.lng||this.language):q.push(t.lng||this.language);const oe=(W,ne,we)=>{const We=k&&we!==d?we:P;this.options.missingKeyHandler?this.options.missingKeyHandler(W,u,ne,We,J,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(W,u,ne,We,J,t),this.emit("missingKey",W,u,ne,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?q.forEach(W=>{const ne=this.pluralResolver.getSuffixes(W,t);K&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ne.indexOf(`${this.options.pluralSeparator}zero`)<0&&ne.push(`${this.options.pluralSeparator}zero`),ne.forEach(we=>{oe([W],a+we,t[`defaultValue${we}`]||Y)})}):oe(q,a,Y))}d=this.extendTranslation(d,e,t,w,s),U&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${u}:${a}`),(U||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${a}`:a,_?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(w.res=d,w.usedParams=this.getUsedParamsDetails(t),w):d}extendTranslation(e,t,s,i,r){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const h=typeof e=="string"&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(h){const d=e.match(this.interpolator.nestingRegexp);g=d&&d.length}let w=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),e=this.interpolator.interpolate(e,w,s.lng||this.language||i.usedLng,s),h){const d=e.match(this.interpolator.nestingRegexp),f=d&&d.length;g<f&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,f=new Array(d),o=0;o<d;o++)f[o]=arguments[o];return r&&r[0]===f[0]&&!s.context?(a.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):a.translate(...f,t)},s)),s.interpolation&&this.interpolator.reset()}const c=s.postProcess||this.options.postProcess,u=typeof c=="string"?[c]:c;return e!=null&&u&&u.length&&s.applyPostProcessor!==!1&&(e=fn.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,i,r,a,c;return typeof e=="string"&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(s))return;const h=this.extractFromKey(u,t),g=h.key;i=g;let w=h.namespaces;this.options.fallbackNS&&(w=w.concat(this.options.fallbackNS));const d=t.count!==void 0&&typeof t.count!="string",f=d&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),o=t.context!==void 0&&(typeof t.context=="string"||typeof t.context=="number")&&t.context!=="",l=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);w.forEach(p=>{this.isValidLookup(s)||(c=p,!Vs[`${l[0]}-${p}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(Vs[`${l[0]}-${p}`]=!0,this.logger.warn(`key "${i}" for languages "${l.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),l.forEach(m=>{if(this.isValidLookup(s))return;a=m;const y=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,g,m,p,t);else{let _;d&&(_=this.pluralResolver.getSuffix(m,t.count,t));const U=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(y.push(g+_),t.ordinal&&_.indexOf(S)===0&&y.push(g+_.replace(S,this.options.pluralSeparator)),f&&y.push(g+U)),o){const k=`${g}${this.options.contextSeparator}${t.context}`;y.push(k),d&&(y.push(k+_),t.ordinal&&_.indexOf(S)===0&&y.push(k+_.replace(S,this.options.pluralSeparator)),f&&y.push(k+U))}}let b;for(;b=y.pop();)this.isValidLookup(s)||(r=b,s=this.getResource(m,p,b,t))}))})}),{res:s,usedKey:i,exactUsedKey:r,usedLng:a,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&typeof e.replace!="string";let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const r of t)delete i[r]}return i}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}const es=n=>n.charAt(0).toUpperCase()+n.slice(1);class zs{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=me.create("languageUtils")}getScriptPartFromCode(e){if(e=Rt(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Rt(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let s=e.split("-");return this.options.lowerCaseLng?s=s.map(i=>i.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=es(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=es(s[1].toLowerCase())),t.indexOf(s[2].toLowerCase())>-1&&(s[2]=es(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(r=>{if(r===i)return r;if(!(r.indexOf("-")<0&&i.indexOf("-")<0)&&(r.indexOf("-")>0&&i.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===i||r.indexOf(i)===0&&i.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],r=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):typeof e=="string"&&r(this.formatLanguageCode(e)),s.forEach(a=>{i.indexOf(a)<0&&r(this.formatLanguageCode(a))}),i}}let Ra=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],La={1:n=>+(n>1),2:n=>+(n!=1),3:n=>0,4:n=>n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,5:n=>n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5,6:n=>n==1?0:n>=2&&n<=4?1:2,7:n=>n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,8:n=>n==1?0:n==2?1:n!=8&&n!=11?2:3,9:n=>+(n>=2),10:n=>n==1?0:n==2?1:n<7?2:n<11?3:4,11:n=>n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3,12:n=>+(n%10!=1||n%100==11),13:n=>+(n!==0),14:n=>n==1?0:n==2?1:n==3?2:3,15:n=>n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2,16:n=>n%10==1&&n%100!=11?0:n!==0?1:2,17:n=>n==1||n%10==1&&n%100!=11?0:1,18:n=>n==0?0:n==1?1:2,19:n=>n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3,20:n=>n==1?0:n==0||n%100>0&&n%100<20?1:2,21:n=>n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0,22:n=>n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3};const Na=["v1","v2","v3"],ja=["v4"],Fs={zero:0,one:1,two:2,few:3,many:4,other:5},Da=()=>{const n={};return Ra.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:La[e.fc]}})}),n};class $a{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=me.create("pluralResolver"),(!this.options.compatibilityJSON||ja.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Da(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const s=Rt(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:s,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];const a=new Intl.PluralRules(s,{type:i});return this.pluralRulesCache[r]=a,a}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((i,r)=>Fs[i]-Fs[r]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):s.numbers.map(i=>this.getSuffix(e,i,t)):[]}getSuffix(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,s);return i?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const s=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[s];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:r():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?r():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!Na.includes(this.options.compatibilityJSON)}}const Zs=function(n,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=Aa(n,e,t);return!r&&i&&typeof t=="string"&&(r=cs(n,t,s),r===void 0&&(r=cs(e,t,s))),r},ts=n=>n.replace(/\$/g,"$$$$");class Ma{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=me.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:r,prefixEscaped:a,suffix:c,suffixEscaped:u,formatSeparator:h,unescapeSuffix:g,unescapePrefix:w,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:o,nestingSuffixEscaped:l,nestingOptionsSeparator:p,maxReplaces:m,alwaysFormat:y}=e.interpolation;this.escape=t!==void 0?t:Ta,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?je(r):a||"{{",this.suffix=c?je(c):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=g?"":w||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=d?je(d):f||je("$t("),this.nestingSuffix=o?je(o):l||je(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=m||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t&&t.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,s,i){let r,a,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=f=>{if(f.indexOf(this.formatSeparator)<0){const m=Zs(t,u,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,s,{...i,...t,interpolationkey:f}):m}const o=f.split(this.formatSeparator),l=o.shift().trim(),p=o.join(this.formatSeparator).trim();return this.format(Zs(t,u,l,this.options.keySeparator,this.options.ignoreJSONStructure),p,s,{...i,...t,interpolationkey:l})};this.resetRegExp();const g=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,w=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>ts(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?ts(this.escape(f)):ts(f)}].forEach(f=>{for(c=0;r=f.regex.exec(e);){const o=r[1].trim();if(a=h(o),a===void 0)if(typeof g=="function"){const p=g(e,r,i);a=typeof p=="string"?p:""}else if(i&&Object.prototype.hasOwnProperty.call(i,o))a="";else if(w){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${o} for interpolating ${e}`),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=js(a));const l=f.safeValue(a);if(e=e.replace(r[0],l),w?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=r[0].length):f.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,r,a;const c=(u,h)=>{const g=this.nestingOptionsSeparator;if(u.indexOf(g)<0)return u;const w=u.split(new RegExp(`${g}[ ]*{`));let d=`{${w[1]}`;u=w[0],d=this.interpolate(d,a);const f=d.match(/'/g),o=d.match(/"/g);(f&&f.length%2===0&&!o||o.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),h&&(a={...h,...a})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,l),`${u}${g}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];a={...s},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let h=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const g=i[1].split(this.formatSeparator).map(w=>w.trim());i[1]=g.shift(),u=g,h=!0}if(r=t(c.call(this,i[1].trim(),a),a),r&&i[0]===e&&typeof r!="string")return r;typeof r!="string"&&(r=js(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),r=""),h&&(r=u.reduce((g,w)=>this.format(g,w,s.lng,{...s,interpolationkey:i[1].trim()}),r.trim())),e=e.replace(i[0],r),this.regexp.lastIndex=0}return e}}const Ua=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[c,...u]=a.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),g=c.trim();t[g]||(t[g]=h),h==="false"&&(t[g]=!1),h==="true"&&(t[g]=!0),isNaN(h)||(t[g]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},De=n=>{const e={};return(t,s,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const a=s+JSON.stringify(r);let c=e[a];return c||(c=n(Rt(s),i),e[a]=c),c(t)}};class Va{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=me.create("formatter"),this.options=e,this.formats={number:De((t,s)=>{const i=new Intl.NumberFormat(t,{...s});return r=>i.format(r)}),currency:De((t,s)=>{const i=new Intl.NumberFormat(t,{...s,style:"currency"});return r=>i.format(r)}),datetime:De((t,s)=>{const i=new Intl.DateTimeFormat(t,{...s});return r=>i.format(r)}),relativetime:De((t,s)=>{const i=new Intl.RelativeTimeFormat(t,{...s});return r=>i.format(r,s.range||"day")}),list:De((t,s)=>{const i=new Intl.ListFormat(t,{...s});return r=>i.format(r)})},this.init(e)}init(e){const s=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=De(t)}format(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(c=>c.indexOf(")")>-1)){const c=r.findIndex(u=>u.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,c)].join(this.formatSeparator)}return r.reduce((c,u)=>{const{formatName:h,formatOptions:g}=Ua(u);if(this.formats[h]){let w=c;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},f=d.locale||d.lng||i.locale||i.lng||s;w=this.formats[h](c,f,{...g,...i,...d})}catch(d){this.logger.warn(d)}return w}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const za=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Fa extends zt{constructor(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=me.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,i.backend,i)}queueLoad(e,t,s,i){const r={},a={},c={},u={};return e.forEach(h=>{let g=!0;t.forEach(w=>{const d=`${h}|${w}`;!s.reload&&this.store.hasResourceBundle(h,w)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,g=!1,a[d]===void 0&&(a[d]=!0),r[d]===void 0&&(r[d]=!0),u[w]===void 0&&(u[w]=!0)))}),g||(c[h]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(e,t,s){const i=e.split("|"),r=i[0],a=i[1];t&&this.emit("failedLoading",r,a,t),!t&&s&&this.store.addResourceBundle(r,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const c={};this.queue.forEach(u=>{ka(u.loaded,[r],a),za(u,e),t&&u.errors.push(t),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{c[h]||(c[h]={});const g=u.loaded[h];g.length&&g.forEach(w=>{c[h][w]===void 0&&(c[h][w]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:r,callback:a});return}this.readingCalls++;const c=(h,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const w=this.waitingReads.shift();this.read(w.lng,w.ns,w.fcName,w.tried,w.wait,w.callback)}if(h&&g&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,r*2,a)},r);return}a(h,g)},u=this.backend[s].bind(this.backend);if(u.length===2){try{const h=u(e,t);h&&typeof h.then=="function"?h.then(g=>c(null,g)).catch(c):c(null,h)}catch(h){c(h)}return}return u(e,t,c)}prepareLoading(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof t=="string"&&(t=[t]);const r=this.queueLoad(e,t,s,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e.split("|"),i=s[0],r=s[1];this.read(i,r,"read",void 0,void 0,(a,c)=>{a&&this.logger.warn(`${t}loading namespace ${r} for language ${i} failed`,a),!a&&c&&this.logger.log(`${t}loaded namespace ${r} for language ${i}`,c),this.loaded(e,a,c)})}saveMissing(e,t,s,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const u={...a,isUpdate:r},h=this.backend.create.bind(this.backend);if(h.length<6)try{let g;h.length===5?g=h(e,t,s,i,u):g=h(e,t,s,i),g&&typeof g.then=="function"?g.then(w=>c(null,w)).catch(c):c(null,g)}catch(g){c(g)}else h(e,t,s,i,c,u)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}}const Bs=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),typeof n[1]=="string"&&(e.defaultValue=n[1]),typeof n[2]=="string"&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Ws=n=>(typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n),_t=()=>{},Za=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class pt extends zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ws(e),this.services={},this.logger=me,this.modules={external:[]},Za(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(typeof t.ns=="string"?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=Bs();this.options={...i,...this.options,...Ws(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const r=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?me.init(r(this.modules.logger),this.options):me.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Va);const w=new zs(this.options);this.store=new Us(this.options.resources,this.options);const d=this.services;d.logger=me,d.resourceStore=this.store,d.languageUtils=w,d.pluralResolver=new $a(w,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=r(g),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Ma(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Fa(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(f){for(var o=arguments.length,l=new Array(o>1?o-1:0),p=1;p<o;p++)l[p-1]=arguments[p];e.emit(f,...l)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Lt(this.services,this.options),this.translator.on("*",function(f){for(var o=arguments.length,l=new Array(o>1?o-1:0),p=1;p<o;p++)l[p-1]=arguments[p];e.emit(f,...l)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,s||(s=_t),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const u=Je(),h=()=>{const g=(w,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(d),s(w,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}loadResources(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_t;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const r=[],a=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&r.indexOf(h)<0&&r.push(h)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>a(u)),this.options.preload&&this.options.preload.forEach(c=>a(c)),this.services.backendConnector.load(r,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(c)})}else s(null)}reloadResources(e,t,s){const i=Je();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=_t),this.services.backendConnector.reload(e,t,r=>{i.resolve(),s(r)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&fn.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(e,t){var s=this;this.isLanguageChangingTo=e;const i=Je();this.emit("languageChanging",e);const r=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},a=(u,h)=>{h?(r(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,i.resolve(function(){return s.t(...arguments)}),t&&t(u,function(){return s.t(...arguments)})},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const h=typeof u=="string"?u:this.services.languageUtils.getBestMatchFromCodes(u);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(h)),this.loadResources(h,g=>{a(g,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),i}getFixedT(e,t,s){var i=this;const r=function(a,c){let u;if(typeof c!="object"){for(var h=arguments.length,g=new Array(h>2?h-2:0),w=2;w<h;w++)g[w-2]=arguments[w];u=i.options.overloadTranslationOptionHandler([a,c].concat(g))}else u={...c};u.lng=u.lng||r.lng,u.lngs=u.lngs||r.lngs,u.ns=u.ns||r.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||s||r.keyPrefix);const d=i.options.keySeparator||".";let f;return u.keyPrefix&&Array.isArray(a)?f=a.map(o=>`${u.keyPrefix}${d}${o}`):f=u.keyPrefix?`${u.keyPrefix}${d}${a}`:a,i.t(f,u)};return typeof e=="string"?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=s,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(c,u)=>{const h=this.services.backendConnector.state[`${c}|${u}`];return h===-1||h===0||h===2};if(t.precheck){const c=t.precheck(this,a);if(c!==void 0)return c}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!i||a(r,e)))}loadNamespaces(e,t){const s=Je();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=Je();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],r=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=i.concat(r),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new zs(Bs());return t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new pt(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_t;const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},r=new pt(i);return(e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(c=>{r[c]=this[c]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},s&&(r.store=new Us(this.store.data,i),r.services.resourceStore=r.store),r.translator=new Lt(r.services,i),r.translator.on("*",function(c){for(var u=arguments.length,h=new Array(u>1?u-1:0),g=1;g<u;g++)h[g-1]=arguments[g];r.emit(c,...h)}),r.init(i,t),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const se=pt.createInstance();se.createInstance=pt.createInstance;se.createInstance;se.dir;se.init;se.loadResources;se.reloadResources;se.use;se.changeLanguage;se.getFixedT;se.t;se.exists;se.setDefaultNamespace;se.hasLoadedNamespace;se.loadNamespaces;se.loadLanguages;class Nt extends ae{constructor(t){super();z(this,"translator",se);this.i18nStorage=t}get activeLocale(){return this.i18nStorage.state.locale??Xt}get languageList(){return Promise.resolve(this).catch(()=>{}),[...Rr.entries()].map(([t,s])=>({code:t,label:s}))}async boot(){if(await this.i18nStorage.sync(),!this.i18nStorage.state.locale){const s=Nt.getUILanguage();await this.setLocale(s)}const t=Nt.buildResources();await this.translator.init({resources:t,lng:this.activeLocale,fallbackLng:Xt,interpolation:{escapeValue:!1}}),this.bootResolve(),await this.bootPromise}t(t,s={}){return this.translator.t(t,s)}async setLocale(t){await this.i18nStorage.setItems({locale:t})}static getUILanguage(){const t=B.i18n.getUILanguage(),s=t.replaceAll("-","_");if(Ns(s))return s;const i=t.substring(0,2);return Ns(i)?i:Xt}static buildResources(){return Object.entries(Object.assign({"./locales/ar/base.json":Dr,"./locales/bg/base.json":Mr,"./locales/bn/base.json":Vr,"./locales/da/base.json":Fr,"./locales/de/base.json":Br,"./locales/en/base.json":Kr,"./locales/es/base.json":Hr,"./locales/fi/base.json":Gr,"./locales/fr/base.json":Qr,"./locales/he/base.json":ea,"./locales/hi/base.json":sa,"./locales/it/base.json":ia,"./locales/nl/base.json":aa,"./locales/no/base.json":ca,"./locales/pl/base.json":ua,"./locales/ru/base.json":ha,"./locales/ta/base.json":fa,"./locales/uk/base.json":ma,"./locales/vi/base.json":ba,"./locales/zh_CN/base.json":wa})).reduce((i,[r,a])=>{const c=r.split("/").at(-2),u=r.split("/").at(-1).split(".").at(0);return i[c]={...i[c],[u]:a.default},i},{})}}const Ba=new ie("i18n",Nr),gn=new Nt(Ba);class Wa{constructor(){z(this,"eventMap",new Map)}subscribe(e){Object.entries(e).forEach(([s,i])=>{this.eventMap.has(s)||this.eventMap.set(s,[]);const r=[...this.eventMap.get(s)??[],i];this.eventMap.set(s,r)})}dispatch(e){Object.entries(e).forEach(([s,i])=>{(this.eventMap.get(s)??[]).forEach(a=>{var c;(c=a(i))==null||c.catch(()=>{})})})}}const Ft=new Wa,ls=["free","premium"],Ka=["available","unavailable"],qa=v.object({accessToken:v.string(),refreshToken:v.string()}),Ks=v.object({type:v.enum(ls),url:v.string().url(),status:v.enum(Ka),nextCheck:v.number()}),Ha=v.object({tokens:qa.optional().describe(D.persist),[ls[0]]:Ks.describe(D.persist),[ls[1]]:Ks.describe(D.persist)}).default({free:{type:"free",url:"",status:"unavailable",nextCheck:0},premium:{type:"premium",url:"",status:"unavailable",nextCheck:0}}),Ja=new le(Ha),jt={authRefreshToken:"/auth/refresh-token/",authLogin:"/auth/login/",authLogout:"/auth/logout/",authForgotPassword:"/auth/forgot-password/",apiLaunch:"/api/launch/",apiLocationList:"/api/location/list/",apiServer:"/api/server/",apiServerList:"/api/server/list/",apiAvailable:"/api/available/",apiAccountAuthToken:"/api/account/account-auth-token/",apiUrlReview:"/api/url/review/"},Ga="https://antpeak.com",Ya="https://zorvian.com",qs="https://s3-oregon-1.s3-us-west-2.amazonaws.com/api.json",Qa=1*60*60*1e3;function Xa(){const e=(gs.UAParser().browser.name??"").toLowerCase();return e?e.includes("firefox")?"firefox":e.includes("opera")?"opera":e.includes("edge")?"edge":"chrome":"chrome"}const Hs=gs.UAParser(),eo=Xa();class mn extends ae{constructor(t,s,i,r,a,c){super();z(this,"domainType");z(this,"domainUrl");this.apiStorage=i,this.globalStateService=r,this.fetchService=a,this.analyticsService=c,this.domainType=t,this.domainUrl=s}get apiDomainUrl(){return this.domainUrl}get hasTokens(){return!!this.apiStorage.state.tokens}get deviceInfo(){const t=B.runtime.getManifest(),s=Hs.browser.name??"Chrome",i=Hs.browser.version??"0.0.0";return{udid:this.globalStateService.udid.value,appVersion:t.version,platform:eo,platformVersion:navigator.userAgent,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,deviceName:`${s} ${i}`}}get isDomainAvailable(){const{status:t,nextCheck:s}=this.apiStorage.state[this.domainType];return t==="available"&&s>Date.now()}async boot(){await this.apiStorage.sync(),this.isDomainAvailable||await this.updateDomainData(),this.bootResolve(),await this.bootPromise}async setTokens(t){await this.apiStorage.setItems({tokens:t})}async removeTokens(){await this.apiStorage.removeItems("tokens")}async updateDomainData(){if(await this.apiGetDomainStatus(this.domainUrl)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:this.domainUrl,status:"available",nextCheck:Date.now()+Qa}});return}const s=await this.apiGetReserveDomains();if(s.success){const i=s.data.free;if(await this.apiGetDomainStatus(i,!0)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:i,status:"available",nextCheck:0}});return}}await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:"",status:"unavailable",nextCheck:0}})}async fetch(t){const s={...t,url:this.apiStorage.state[this.domainType].url+jt[t.url]};return await this.request(s)}async apiGetReserveDomains(){const t=await this.fetchService.request({method:"GET",url:qs});return t.success||this.analyticsService.sendEvent({type:"google-analytics",name:"api_no_response_bucket",data:{api_domain:qs,status_code:Se.getStatusCodeMessage(t)}}),t}async apiGetDomainStatus(t,s=!1){const i=await this.fetchService.request({method:"GET",url:`${t}${jt.apiAvailable}`});return i.success||this.analyticsService.sendEvent({type:"google-analytics",name:s?"api_no_response_reserve":"api_no_response_default",data:{api_domain:t,status_code:Se.getStatusCodeMessage(i)}}),i.success?i.data.message==="OK":!1}}class to extends mn{constructor(e,t,s,i,r,a,c){super(e,t,s,i,r,c),this.apiStorage=s,this.globalStateService=i,this.fetchService=r,this.eventService=a,this.analyticsService=c}async request(e){var c,u;const t=((c=this.apiStorage.state.tokens)==null?void 0:c.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${t}`,...e.headers}});if(s.success||s.errors.every(h=>h.status!==401))return s;const r=((u=this.apiStorage.state.tokens)==null?void 0:u.refreshToken)??"",a=await this.fetchService.request({headers:{Authorization:`Bearer ${r}`},method:"POST",url:this.apiStorage.state[this.domainType].url+jt.apiLaunch,body:this.deviceInfo});return a.success?(await this.setTokens({accessToken:a.data.accessToken,refreshToken:a.data.accessToken}),this.request(e)):(this.eventService.dispatch({"free-refresh-token-failed":void 0}),s)}}class so extends mn{constructor(e,t,s,i,r,a,c){super(e,t,s,i,r,c),this.apiStorage=s,this.globalStateService=i,this.fetchService=r,this.eventService=a,this.analyticsService=c}async request(e){var c,u;const t=((c=this.apiStorage.state.tokens)==null?void 0:c.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${t}`,...e.headers}});if(s.success||s.errors.every(h=>h.status!==401))return s;const r=((u=this.apiStorage.state.tokens)==null?void 0:u.refreshToken)??"",a=await this.fetchService.request({headers:{Authorization:`Bearer ${r}`},method:"POST",url:this.apiStorage.state[this.domainType].url+jt.authRefreshToken,body:this.deviceInfo});return a.success?(await this.setTokens({accessToken:a.data.accessToken,refreshToken:a.data.refreshToken}),this.request(e)):(this.eventService.dispatch({"premium-refresh-token-failed":void 0}),s)}}const vn=new ie("api",Ja),bn=new to("free",Ga,vn,Ut,Vt,Ft,mt),yn=new so("premium",Ya,vn,Ut,Vt,Ft,mt);var wn=(n=>(n[n.regular=0]="regular",n[n.lifeTime=1]="lifeTime",n))(wn||{}),ms=(n=>(n[n.prepaid=0]="prepaid",n[n.trial=1]="trial",n))(ms||{}),Dt=(n=>(n[n.disabled=0]="disabled",n[n.active=1]="active",n))(Dt||{}),xn=(n=>(n[n.noSlots=0]="noSlots",n[n.hasSlots=1]="hasSlots",n))(xn||{}),ft=(n=>(n[n.disabled=0]="disabled",n[n.active=1]="active",n))(ft||{}),_n=(n=>(n[n.needConfirm=0]="needConfirm",n[n.confirmed=1]="confirmed",n))(_n||{});const no=v.object({name:v.string(),infinity:v.nativeEnum(wn),trial:v.nativeEnum(ms),status:v.nativeEnum(Dt),slot:v.nativeEnum(xn),startTime:v.number(),endTime:v.number(),countdown:v.number(),today:v.number()});v.object({udid:v.string(),status:v.nativeEnum(ft),registeredAt:v.number(),lastLoggedAt:v.number()});const io=v.object({id:v.number(),username:v.string(),email:v.string().email(),status:v.nativeEnum(ft),confirm:v.nativeEnum(_n),registeredAt:v.number(),registeredCountryCode:v.string(),lastLoggedAt:v.number(),lastCountryCode:v.string(),confirmedEmailAt:v.number(),shareUrl:v.string().url()}),ro=v.object({subscription:no.optional().describe(D.persist),user:io.optional().describe(D.persist)}).default({}),ao=new le(ro);class oo extends ae{constructor(e){super(),this.userStorage=e}get user(){return this.userStorage.state.user??null}get subscription(){return this.userStorage.state.subscription??null}get canUsePremiumDomain(){var s,i;const e=((s=this.userStorage.state.user)==null?void 0:s.status)===ft.active,t=((i=this.userStorage.state.subscription)==null?void 0:i.status)===Dt.active;return e&&t}get userType(){var i,r,a;const e=((i=this.userStorage.state.user)==null?void 0:i.status)===ft.active,t=((r=this.userStorage.state.subscription)==null?void 0:r.status)===Dt.active,s=((a=this.userStorage.state.subscription)==null?void 0:a.trial)===ms.trial;return e&&t&&s?"trial":e&&t?"premium":"free"}async boot(){await this.userStorage.sync(),this.bootResolve(),await this.bootPromise}async setUser(e){await this.userStorage.setItems({user:e})}async removeUser(){await this.userStorage.removeItems("user")}async setSubscription(e){await this.userStorage.setItems({subscription:e})}async removeSubscription(){await this.userStorage.removeItems("subscription")}}const co=new ie("user",ao),Sn=new oo(co),lo=v.object({blockWebrtc:v.boolean().describe(D.persist)}).default({blockWebrtc:!0}),uo=new le(lo),ss="disable_non_proxied_udp",Ue=class Ue extends ae{constructor(t){super();z(this,"setting",B.privacy.network.webRTCIPHandlingPolicy);z(this,"details",{levelOfControl:"not_controllable",value:"default"});this.webrtcStorage=t,this.setting.onChange.addListener(s=>{this.details=s,Ue.settingChangeResolver()})}get canControlWebrtc(){const{levelOfControl:t,value:s}=this.details;return t==="not_controllable"||t==="controlled_by_other_extensions"?{status:!1,cause:t}:t==="controllable_by_this_extension"&&s===ss?{status:!1,cause:"controlled_by_other_extensions"}:{status:!0}}get isApplied(){const{levelOfControl:t,value:s}=this.details;return t==="controlled_by_this_extension"&&s===ss}get needEnableWebrtc(){return this.webrtcStorage.state.blockWebrtc}async boot(){await this.webrtcStorage.sync(),this.details=await this.setting.get({}),this.bootResolve(),await this.bootPromise}async enable(){if(!this.canControlWebrtc.status)return this.canControlWebrtc;const t=new Promise(s=>{Ue.settingChangeResolver=s});return await this.setting.set({value:ss,scope:"regular"}),await t,this.canControlWebrtc}async disable(){if(!this.canControlWebrtc.status)return this.canControlWebrtc;const t=new Promise(s=>{Ue.settingChangeResolver=s});return await this.setting.clear({}),await t,this.canControlWebrtc}async setBlockWebrtc(t){await this.webrtcStorage.setItems({blockWebrtc:t})}};z(Ue,"settingChangeResolver",()=>{});let us=Ue;const ho=new ie("webrtc-settings",uo),po=new us(ho),fo=["disconnected","connecting","connected","disconnecting"],go="disconnected",mo=v.object({status:v.enum(fo).describe(D.persist),ipAddress:v.string().optional().describe(D.session),connectionCount:v.number().describe(D.persist),useAutoConnect:v.boolean().describe(D.persist)}).default({status:go,connectionCount:0,useAutoConnect:!1}),vo=new le(mo);class bo extends ae{constructor(e){super(),this.connectionStorage=e}get currentIp(){return this.connectionStorage.state.ipAddress}get status(){return this.connectionStorage.state.status}get isConnected(){return this.connectionStorage.state.status==="connected"}get connectionCount(){return this.connectionStorage.state.connectionCount}get useAutoConnect(){return this.connectionStorage.state.useAutoConnect}async boot(){await this.connectionStorage.sync(),this.bootResolve(),await this.bootPromise}async setIpAddress(e){await this.connectionStorage.setItems({ipAddress:e})}async removeIpAddress(){await this.connectionStorage.removeItems("ipAddress")}async setConnectionStatus(e){await this.connectionStorage.setItems({status:e})}async incrementConnectionCount(){const e=this.connectionStorage.state.connectionCount+1;await this.connectionStorage.setItems({connectionCount:e})}async setAutoConnect(e){await this.connectionStorage.setItems({useAutoConnect:e})}}const yo=new ie("connection",vo),wo=new bo(yo),xo="nl";var Zt=(n=>(n[n.public=0]="public",n[n.private=1]="private",n))(Zt||{}),vs=(n=>(n[n.free=0]="free",n[n.premium=1]="premium",n))(vs||{}),_o=(n=>(n.free="free",n.premium="premium",n.custom="custom",n))(_o||{});const So=v.object({id:v.string(),name:v.string(),code:v.string(),phrases:v.string().array()}),ko=v.object({id:v.string(),name:v.string(),phrases:v.string().array(),region:v.string(),via:v.string(),target:v.string(),countryCode:v.string(),type:v.nativeEnum(Zt),proxyType:v.nativeEnum(vs)}),Ao=v.object({region:v.string(),name:v.string(),description:v.string(),countryCode:v.string(),latitude:v.string(),longitude:v.string(),networkLoad:v.string(),priority:v.number(),type:v.nativeEnum(Zt),proxy_type:v.nativeEnum(vs)}),Co=v.object({id:v.string(),type:v.literal(2)}),To=v.object({id:v.string(),type:v.literal(1),items:Co.array()}),Eo=v.object({countries:So.array(),locations:ko.array(),items:To.array()}),Io=v.object({type:v.nativeEnum(Zt),region:v.string(),regionName:v.string(),countryName:v.string(),countryCode:v.string()}),Po=v.object({activeId:v.string().optional().describe(D.persist),favoriteIds:v.string().array().describe(D.persist),locationsData:Eo.optional().describe(D.session),lastActiveLocationData:Io.optional().describe(D.persist)}).default({favoriteIds:[]}),Oo=new le(Po);function Ro(n){return Ao.safeParse(n).success}class Lo extends ae{constructor(e){super(),this.locationStorage=e}get activeLocation(){return!this.locationStorage.state.activeId||!this.locationStorage.state.locationsData?null:this.locationStorage.state.locationsData.locations.find(t=>t.id===this.locationStorage.state.activeId)??null}get activeLocationId(){return this.locationStorage.state.activeId??""}get favoriteLocations(){return this.locationStorage.state.favoriteIds}get locationsData(){return this.locationStorage.state.locationsData??null}get lastActiveLocation(){return this.locationStorage.state.lastActiveLocationData??null}async boot(){await this.locationStorage.sync(),this.bootResolve(),await this.bootPromise}async setLocationsData(e){await this.locationStorage.setItems({locationsData:e})}async removeLocationsData(){await this.locationStorage.removeItems("locationsData")}async setActiveLocation(e){var s,i,r;let t;if(typeof e=="string")t=e;else if(Ro(e)){const a=(s=this.locationStorage.state.locationsData)==null?void 0:s.locations.find(c=>{const u=c.region===e.region,h=c.proxyType===e.proxy_type;return u&&h});t=a==null?void 0:a.id}else{const a=(i=this.locationStorage.state.locationsData)==null?void 0:i.locations.find(c=>c.region===xo);t=a==null?void 0:a.id}if(t?await this.locationStorage.setItems({activeId:t}):await this.locationStorage.removeItems("activeId"),this.activeLocation){const a=(r=this.locationStorage.state.locationsData)==null?void 0:r.countries.find(u=>u.code===this.activeLocation.countryCode),c={type:this.activeLocation.type,region:this.activeLocation.region,regionName:this.activeLocation.name,countryName:(a==null?void 0:a.name)??"N/A",countryCode:this.activeLocation.countryCode};await this.locationStorage.setItems({lastActiveLocationData:c})}else await this.locationStorage.removeItems("lastActiveLocationData")}async removeActiveLocation(){await this.locationStorage.removeItems("activeId")}async setFavoriteLocations(e){const t=[...new Set([...this.locationStorage.state.favoriteIds,...e])];await this.locationStorage.setItems({favoriteIds:t})}async removeFavoriteLocations(e){const t=this.locationStorage.state.favoriteIds.filter(s=>!e.includes(s));await this.locationStorage.setItems({favoriteIds:t})}}const No=new ie("location",Oo),kn=new Lo(No),jo=v.object({url:v.string(),favicon:v.string().optional()}),Do=v.object({sites:jo.array().describe(D.persist)}).default({sites:[]}),$o=new le(Do);var An={exports:{}};(function(n){(function(e){const t="(0?\\d+|0x[a-f0-9]+)",s={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},i=new RegExp("^0[0-7]+$","i"),r=new RegExp("^0x[a-f0-9]+$","i"),a="%[0-9a-z]{1,}",c="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${c})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${c})|(?:::)(?:${c})?)${t}\\.${t}\\.${t}\\.${t}(${a})?$`,"i")};function h(o,l){if(o.indexOf("::")!==o.lastIndexOf("::"))return null;let p=0,m=-1,y=(o.match(u.zoneIndex)||[])[0],b,_;for(y&&(y=y.substring(1),o=o.replace(/%.+$/,""));(m=o.indexOf(":",m+1))>=0;)p++;if(o.substr(0,2)==="::"&&p--,o.substr(-2,2)==="::"&&p--,p>l)return null;for(_=l-p,b=":";_--;)b+="0:";return o=o.replace("::",b),o[0]===":"&&(o=o.slice(1)),o[o.length-1]===":"&&(o=o.slice(0,-1)),l=function(){const U=o.split(":"),S=[];for(let k=0;k<U.length;k++)S.push(parseInt(U[k],16));return S}(),{parts:l,zoneId:y}}function g(o,l,p,m){if(o.length!==l.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let y=0,b;for(;m>0;){if(b=p-m,b<0&&(b=0),o[y]>>b!==l[y]>>b)return!1;m-=p,y+=1}return!0}function w(o){if(r.test(o))return parseInt(o,16);if(o[0]==="0"&&!isNaN(parseInt(o[1],10))){if(i.test(o))return parseInt(o,8);throw new Error(`ipaddr: cannot parse ${o} as octal`)}return parseInt(o,10)}function d(o,l){for(;o.length<l;)o=`0${o}`;return o}const f={};f.IPv4=function(){function o(l){if(l.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let p,m;for(p=0;p<l.length;p++)if(m=l[p],!(0<=m&&m<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=l}return o.prototype.SpecialRanges={unspecified:[[new o([0,0,0,0]),8]],broadcast:[[new o([255,255,255,255]),32]],multicast:[[new o([224,0,0,0]),4]],linkLocal:[[new o([169,254,0,0]),16]],loopback:[[new o([127,0,0,0]),8]],carrierGradeNat:[[new o([100,64,0,0]),10]],private:[[new o([10,0,0,0]),8],[new o([172,16,0,0]),12],[new o([192,168,0,0]),16]],reserved:[[new o([192,0,0,0]),24],[new o([192,0,2,0]),24],[new o([192,88,99,0]),24],[new o([198,18,0,0]),15],[new o([198,51,100,0]),24],[new o([203,0,113,0]),24],[new o([240,0,0,0]),4]],as112:[[new o([192,175,48,0]),24],[new o([192,31,196,0]),24]],amt:[[new o([192,52,193,0]),24]]},o.prototype.kind=function(){return"ipv4"},o.prototype.match=function(l,p){let m;if(p===void 0&&(m=l,l=m[0],p=m[1]),l.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return g(this.octets,l.octets,8,p)},o.prototype.prefixLengthFromSubnetMask=function(){let l=0,p=!1;const m={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let y,b,_;for(y=3;y>=0;y-=1)if(b=this.octets[y],b in m){if(_=m[b],p&&_!==0)return null;_!==8&&(p=!0),l+=_}else return null;return 32-l},o.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},o.prototype.toByteArray=function(){return this.octets.slice(0)},o.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse(`::ffff:${this.toString()}`)},o.prototype.toNormalizedString=function(){return this.toString()},o.prototype.toString=function(){return this.octets.join(".")},o}(),f.IPv4.broadcastAddressFromCIDR=function(o){try{const l=this.parseCIDR(o),p=l[0].toByteArray(),m=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[];let b=0;for(;b<4;)y.push(parseInt(p[b],10)|parseInt(m[b],10)^255),b++;return new this(y)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(o){return this.parser(o)!==null},f.IPv4.isValid=function(o){try{return new this(this.parser(o)),!0}catch{return!1}},f.IPv4.isValidCIDR=function(o){try{return this.parseCIDR(o),!0}catch{return!1}},f.IPv4.isValidFourPartDecimal=function(o){return!!(f.IPv4.isValid(o)&&o.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(o){let l,p,m,y,b;try{for(l=this.parseCIDR(o),m=l[0].toByteArray(),b=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[],p=0;p<4;)y.push(parseInt(m[p],10)&parseInt(b[p],10)),p++;return new this(y)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(o){const l=this.parser(o);if(l===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(l)},f.IPv4.parseCIDR=function(o){let l;if(l=o.match(/^(.+)\/(\d+)$/)){const p=parseInt(l[2]);if(p>=0&&p<=32){const m=[this.parse(l[1]),p];return Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(o){let l,p,m;if(l=o.match(s.fourOctet))return function(){const y=l.slice(1,6),b=[];for(let _=0;_<y.length;_++)p=y[_],b.push(w(p));return b}();if(l=o.match(s.longValue)){if(m=w(l[1]),m>4294967295||m<0)throw new Error("ipaddr: address outside defined range");return function(){const y=[];let b;for(b=0;b<=24;b+=8)y.push(m>>b&255);return y}().reverse()}else return(l=o.match(s.twoOctet))?function(){const y=l.slice(1,4),b=[];if(m=w(y[1]),m>16777215||m<0)throw new Error("ipaddr: address outside defined range");return b.push(w(y[0])),b.push(m>>16&255),b.push(m>>8&255),b.push(m&255),b}():(l=o.match(s.threeOctet))?function(){const y=l.slice(1,5),b=[];if(m=w(y[2]),m>65535||m<0)throw new Error("ipaddr: address outside defined range");return b.push(w(y[0])),b.push(w(y[1])),b.push(m>>8&255),b.push(m&255),b}():null},f.IPv4.subnetMaskFromPrefixLength=function(o){if(o=parseInt(o),o<0||o>32)throw new Error("ipaddr: invalid IPv4 prefix length");const l=[0,0,0,0];let p=0;const m=Math.floor(o/8);for(;p<m;)l[p]=255,p++;return m<4&&(l[m]=Math.pow(2,o%8)-1<<8-o%8),new this(l)},f.IPv6=function(){function o(l,p){let m,y;if(l.length===16)for(this.parts=[],m=0;m<=14;m+=2)this.parts.push(l[m]<<8|l[m+1]);else if(l.length===8)this.parts=l;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(m=0;m<this.parts.length;m++)if(y=this.parts[m],!(0<=y&&y<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");p&&(this.zoneId=p)}return o.prototype.SpecialRanges={unspecified:[new o([0,0,0,0,0,0,0,0]),128],linkLocal:[new o([65152,0,0,0,0,0,0,0]),10],multicast:[new o([65280,0,0,0,0,0,0,0]),8],loopback:[new o([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new o([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new o([0,0,0,0,0,65535,0,0]),96],discard:[new o([256,0,0,0,0,0,0,0]),64],rfc6145:[new o([0,0,0,0,65535,0,0,0]),96],rfc6052:[new o([100,65435,0,0,0,0,0,0]),96],"6to4":[new o([8194,0,0,0,0,0,0,0]),16],teredo:[new o([8193,0,0,0,0,0,0,0]),32],benchmarking:[new o([8193,2,0,0,0,0,0,0]),48],amt:[new o([8193,3,0,0,0,0,0,0]),32],as112v6:[[new o([8193,4,274,0,0,0,0,0]),48],[new o([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new o([8193,16,0,0,0,0,0,0]),28],orchid2:[new o([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new o([8193,48,0,0,0,0,0,0]),28],reserved:[[new o([8193,0,0,0,0,0,0,0]),23],[new o([8193,3512,0,0,0,0,0,0]),32]]},o.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},o.prototype.kind=function(){return"ipv6"},o.prototype.match=function(l,p){let m;if(p===void 0&&(m=l,l=m[0],p=m[1]),l.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return g(this.parts,l.parts,16,p)},o.prototype.prefixLengthFromSubnetMask=function(){let l=0,p=!1;const m={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let y,b;for(let _=7;_>=0;_-=1)if(y=this.parts[_],y in m){if(b=m[y],p&&b!==0)return null;b!==16&&(p=!0),l+=b}else return null;return 128-l},o.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},o.prototype.toByteArray=function(){let l;const p=[],m=this.parts;for(let y=0;y<m.length;y++)l=m[y],p.push(l>>8),p.push(l&255);return p},o.prototype.toFixedLengthString=function(){const l=(function(){const m=[];for(let y=0;y<this.parts.length;y++)m.push(d(this.parts[y].toString(16),4));return m}).call(this).join(":");let p="";return this.zoneId&&(p=`%${this.zoneId}`),l+p},o.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const l=this.parts.slice(-2),p=l[0],m=l[1];return new f.IPv4([p>>8,p&255,m>>8,m&255])},o.prototype.toNormalizedString=function(){const l=(function(){const m=[];for(let y=0;y<this.parts.length;y++)m.push(this.parts[y].toString(16));return m}).call(this).join(":");let p="";return this.zoneId&&(p=`%${this.zoneId}`),l+p},o.prototype.toRFC5952String=function(){const l=/((^|:)(0(:|$)){2,})/g,p=this.toNormalizedString();let m=0,y=-1,b;for(;b=l.exec(p);)b[0].length>y&&(m=b.index,y=b[0].length);return y<0?p:`${p.substring(0,m)}::${p.substring(m+y)}`},o.prototype.toString=function(){return this.toRFC5952String()},o}(),f.IPv6.broadcastAddressFromCIDR=function(o){try{const l=this.parseCIDR(o),p=l[0].toByteArray(),m=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[];let b=0;for(;b<16;)y.push(parseInt(p[b],10)|parseInt(m[b],10)^255),b++;return new this(y)}catch(l){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${l})`)}},f.IPv6.isIPv6=function(o){return this.parser(o)!==null},f.IPv6.isValid=function(o){if(typeof o=="string"&&o.indexOf(":")===-1)return!1;try{const l=this.parser(o);return new this(l.parts,l.zoneId),!0}catch{return!1}},f.IPv6.isValidCIDR=function(o){if(typeof o=="string"&&o.indexOf(":")===-1)return!1;try{return this.parseCIDR(o),!0}catch{return!1}},f.IPv6.networkAddressFromCIDR=function(o){let l,p,m,y,b;try{for(l=this.parseCIDR(o),m=l[0].toByteArray(),b=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[],p=0;p<16;)y.push(parseInt(m[p],10)&parseInt(b[p],10)),p++;return new this(y)}catch(_){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${_})`)}},f.IPv6.parse=function(o){const l=this.parser(o);if(l.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(l.parts,l.zoneId)},f.IPv6.parseCIDR=function(o){let l,p,m;if((p=o.match(/^(.+)\/(\d+)$/))&&(l=parseInt(p[2]),l>=0&&l<=128))return m=[this.parse(p[1]),l],Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(o){let l,p,m,y,b,_;if(m=o.match(u.deprecatedTransitional))return this.parser(`::ffff:${m[1]}`);if(u.native.test(o))return h(o,8);if((m=o.match(u.transitional))&&(_=m[6]||"",l=m[1],m[1].endsWith("::")||(l=l.slice(0,-1)),l=h(l+_,6),l.parts)){for(b=[parseInt(m[2]),parseInt(m[3]),parseInt(m[4]),parseInt(m[5])],p=0;p<b.length;p++)if(y=b[p],!(0<=y&&y<=255))return null;return l.parts.push(b[0]<<8|b[1]),l.parts.push(b[2]<<8|b[3]),{parts:l.parts,zoneId:l.zoneId}}return null},f.IPv6.subnetMaskFromPrefixLength=function(o){if(o=parseInt(o),o<0||o>128)throw new Error("ipaddr: invalid IPv6 prefix length");const l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let p=0;const m=Math.floor(o/8);for(;p<m;)l[p]=255,p++;return m<16&&(l[m]=Math.pow(2,o%8)-1<<8-o%8),new this(l)},f.fromByteArray=function(o){const l=o.length;if(l===4)return new f.IPv4(o);if(l===16)return new f.IPv6(o);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(o){return f.IPv6.isValid(o)||f.IPv4.isValid(o)},f.isValidCIDR=function(o){return f.IPv6.isValidCIDR(o)||f.IPv4.isValidCIDR(o)},f.parse=function(o){if(f.IPv6.isValid(o))return f.IPv6.parse(o);if(f.IPv4.isValid(o))return f.IPv4.parse(o);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(o){try{return f.IPv6.parseCIDR(o)}catch{try{return f.IPv4.parseCIDR(o)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(o){const l=this.parse(o);return l.kind()==="ipv6"&&l.isIPv4MappedAddress()?l.toIPv4Address():l},f.subnetMatch=function(o,l,p){let m,y,b,_;p==null&&(p="unicast");for(y in l)if(Object.prototype.hasOwnProperty.call(l,y)){for(b=l[y],b[0]&&!(b[0]instanceof Array)&&(b=[b]),m=0;m<b.length;m++)if(_=b[m],o.kind()===_[0].kind()&&o.match.apply(o,_))return y}return p},n.exports?n.exports=f:e.ipaddr=f})(ps)})(An);var Mo=An.exports;const Js=Ys(Mo);class bs extends ae{constructor(t){super();z(this,"NON_ROUTABLE_IP_ADDRESS",["0.0.0.0/8","10.0.0.0/8","14.0.0.0/8","24.0.0.0/8","39.0.0.0/8","127.0.0.0/8","128.0.0.0/16","169.254.0.0/16","172.16.0.0/12","191.255.0.0/16","192.0.0.0/24","192.0.2.0/24","192.88.99.0/24","192.168.0.0/16","198.18.0.0/15","223.255.255.0/24","224.0.0.0/4","240.0.0.0/4"]);z(this,"DEFAULT_EXCLUSIONS",["::1","localhost","*.local","127.0.0.1"]);this.exclusionsStorage=t}get nonRoutableNets(){const t=s=>{const[i,r]=Js.parseCIDR(s);return[i.toString(),Js.IPv4.subnetMaskFromPrefixLength(r).toString()]};return this.NON_ROUTABLE_IP_ADDRESS.map(t)}get exclusionList(){const t=this.exclusionsStorage.state.sites.map(s=>s.url);return[...this.DEFAULT_EXCLUSIONS,...t]}get nonRoutableList(){return[...this.NON_ROUTABLE_IP_ADDRESS]}async boot(){await this.exclusionsStorage.sync(),this.bootResolve(),await this.bootPromise}async set(t,s){const i=bs.parseHostname(t);if(!i||this.exclusionsStorage.state.sites.some(c=>c.url===i))return;const a=[...this.exclusionsStorage.state.sites,{url:i,...s?{favicon:s}:{}}];await this.exclusionsStorage.setItems({sites:a})}async remove(t){const s=this.exclusionsStorage.state.sites.filter(i=>i.url!==t);await this.exclusionsStorage.setItems({sites:s})}static parseHostname(t){const s=t.match(/^(?:https?:)?(?:\/\/)?([^/?]+)/i);return s&&s[1]}}const Uo=new ie("exclusions",$o),Vo=new bs(Uo),zo=["udp","tcp","ipsec","https","http","sws","wg"],Fo=v.object({addresses:v.array(v.string()),protocol:v.enum(zo),port:v.number()}),Zo=v.object({username:v.string(),password:v.string()}),Bo=v.object({credentials:Zo.nullable().describe(D.persist),serverConfigList:v.array(Fo).describe(D.persist)}).default({credentials:null,serverConfigList:[]}),Wo=new le(Bo),Pe=class Pe extends ae{constructor(t){super();z(this,"setting",B.proxy.settings);z(this,"details",{levelOfControl:"not_controllable",value:{mode:"system"}});this.proxyStorage=t,this.setting.onChange.addListener(s=>{this.details=s,Pe.settingChangeResolver()})}get canControlProxy(){const{levelOfControl:t}=this.details;return t==="not_controllable"||t==="controlled_by_other_extensions"?{status:!1,cause:t}:{status:!0}}get isApplied(){const{levelOfControl:t}=this.details;return t==="controlled_by_this_extension"}async getAuthCredentials(){const{credentials:t}=await this.proxyStorage.getItems("credentials");return t}async getServerConfigList(){const{serverConfigList:t}=await this.proxyStorage.getItems("serverConfigList");return t}async boot(){await this.proxyStorage.sync(),this.details=await this.setting.get({}),this.bootResolve(),await this.bootPromise}async enable(t){if(this.isApplied)return this.canControlProxy;if(!this.canControlProxy.status)return this.canControlProxy;const s=Pe.createPacScriptProxyConfig(t);await this.proxyStorage.setItems({credentials:t.credentials,serverConfigList:t.serverConfig});const i=new Promise(r=>{Pe.settingChangeResolver=r});return await this.setting.set({value:s,scope:"regular"}),await i,this.canControlProxy}async disable(){if(!this.isApplied)return!0;await this.proxyStorage.setItems({credentials:null,serverConfigList:[]});const t=new Promise(s=>{Pe.settingChangeResolver=s});return await this.setting.clear({}),await t,!this.isApplied}static createPacScriptProxyConfig(t){const s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,i=t.serverConfig.flatMap(a=>{const c=a.protocol.toUpperCase();return a.addresses.map(u=>`${c} ${u}:${a.port}`)}).join("; ");return{mode:"pac_script",pacScript:{data:`
      function FindProxyForURL(url, host) {
        const areHostnamesEqual = (hostnameA, hostnameB) => {
          const wwwRegex = /^www\\./;
          const oldHostnameWithoutWww = hostnameA.replace(wwwRegex, '');
          const newHostnameWithoutWww = hostnameB.replace(wwwRegex, '');
          return oldHostnameWithoutWww === newHostnameWithoutWww;
        };

        if (isPlainHostName(host)) {
          return 'DIRECT';
        }

        const ipv4Regex = new RegExp(${s});
        const nonRoutableNets = ${JSON.stringify(t.nonRoutableNets)};
        if (ipv4Regex.test(host) && nonRoutableNets.some(([pattern, mask]) => isInNet(host, pattern, mask))) {
          return 'DIRECT';
        }

        const exclusions = ${JSON.stringify(t.exclusionList)};
        if (exclusions.some(el => (areHostnamesEqual(host, el) || shExpMatch(host, el)))) {
          return 'DIRECT';
        }

        return '${i}';
      }`}}}};z(Pe,"settingChangeResolver",()=>{});let ds=Pe;const Ko=new ie("proxy",Wo),qo=new ds(Ko),Ve=class Ve{async setImage(e){const t=e==="connected"?Ve.CONNECTED_ICONS:Ve.DISCONNECTED_ICONS;await B.action.setIcon({path:t}),await Promise.resolve(this)}async setTooltip(e){const s=B.runtime.getManifest().name;await B.action.setTitle({title:`${s}
${e}`}),await Promise.resolve(this)}};z(Ve,"CONNECTED_ICONS",{16:"/icons/16.png",32:"/icons/32.png",48:"/icons/48.png",64:"/icons/64.png",128:"/icons/128.png"}),z(Ve,"DISCONNECTED_ICONS",{16:"/icons/16-grey.png",32:"/icons/32-grey.png",48:"/icons/48-grey.png",64:"/icons/64-grey.png",128:"/icons/128-grey.png"});let hs=Ve;const Ho=new hs,Jo=["https://captive.apple.com/"],Go="https://cloudflare.com/cdn-cgi/trace",Gs="n/a";class Yo{constructor(e,t,s,i,r,a,c,u,h,g,w,d,f,o,l){this.messageService=e,this.analyticsService=t,this.eventService=s,this.fetchService=i,this.connectionService=r,this.apiFreeService=a,this.apiPremiumService=c,this.userService=u,this.locationService=h,this.exclusionsService=g,this.proxyService=w,this.iconService=d,this.i18nService=f,this.appService=o,this.notificationService=l,this.eventService.subscribe({"free-refresh-token-failed":this.disconnect.bind(this),"premium-refresh-token-failed":this.disconnect.bind(this)}),this.eventService.subscribe({"internet-connection-changed":this.changeInternetConnectionListener.bind(this)})}get needAuthTrigger(){return this.appService.majorBrowserVersion===0?!1:this.appService.majorBrowserVersion<122}async init(){await this.updateIcon(),this.locationService.locationsData||await this.updateLocationData(),this.connectionService.currentIp||await this.updateIpAddress()}async getLocationsData(){return await Promise.resolve(),{success:!0,data:{data:this.locationService.locationsData,activeId:this.locationService.activeLocationId,favoriteIds:this.locationService.favoriteLocations}}}async getLastActiveLocation(){return await Promise.resolve(),this.locationService.lastActiveLocation?{success:!0,data:this.locationService.lastActiveLocation}:{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]}}async updateLocations(){const e=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"}):await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});return e.success?(await this.locationService.setLocationsData(e.data),{success:!0,data:{data:this.locationService.locationsData,activeId:this.locationService.activeLocationId,favoriteIds:this.locationService.favoriteLocations}}):e}async setActiveLocation(e){return await this.locationService.setActiveLocation(e),{success:!0,data:{success:!0}}}async setFavoriteLocations(e){return e.action==="add"?await this.locationService.setFavoriteLocations(e.list):await this.locationService.removeFavoriteLocations(e.list),{success:!0,data:{success:!0}}}async connect(){const e=Date.now();if(await this.changeConnectionStatus("connecting"),!this.locationService.activeLocation)return await this.changeConnectionStatus("disconnected"),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]};const{name:t,region:s}=this.locationService.activeLocation,i=`${s}, ${t}`;this.analyticsService.sendEvent({type:"aws-kinesis",name:"connection_tried",data:{event_properties__screen_name:"vpn",event_properties__location:i}}),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_tried",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id}}),this.analyticsService.sendEvent({type:"amplitude",name:"connection_tried",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id}});const r={protocol:"https",region:this.locationService.activeLocation.region,type:this.locationService.activeLocation.type},a=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiServerList",body:r}):await this.apiFreeService.fetch({method:"POST",url:"apiServerList",body:r});if(!a.success)return await this.changeConnectionStatus("disconnected"),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_backend",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id,status_code:Se.getStatusCodeMessage(a)}}),this.analyticsService.sendEvent({type:"amplitude",name:"connection_failed_backend",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id,status_code:Se.getStatusCodeMessage(a)}}),this.analyticsService.sendEvent({type:"aws-kinesis",name:"connection_failed_backend",data:{event_properties__screen_name:"vpn",event_properties__location:i,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:"no_addresses"}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.server-config")}]};const c=a.data.map(o=>{const l=this.appService.isBlockAds?o.rpz_port:o.port;return{addresses:o.addresses,protocol:o.protocol,port:l}}),{username:u,password:h}=a.data[0];let g=!1,w="";for(let o=0;o<c.length;o+=1){const l=c[o],p=await this.proxyService.enable({serverConfig:[l],credentials:{username:u,password:h},nonRoutableNets:this.exclusionsService.nonRoutableNets,exclusionList:this.exclusionsService.exclusionList});if(!p.status){await this.changeConnectionStatus("disconnected"),g=!1,w=p.cause==="not_controllable"?this.i18nService.t("base:connect-errors.not-controllable"):this.i18nService.t("base:connect-errors.controlled-by-other-extensions");break}const m={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:l.addresses[0],server_region:this.locationService.activeLocation.id};if(this.needAuthTrigger&&!await this.triggerAuthRequiredListener()){await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_create_tab",data:{...m,status_code:"tab-create"}}),this.analyticsService.sendEvent({type:"aws-kinesis",name:"connection_failed_create_tab",data:{event_properties__screen_name:"vpn",event_properties__location:i,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:l.addresses[0]}});continue}const y=await this.checkInternetConnection();if(y.success){g=!0;break}else await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_availability_domain_1",data:{...m,status_code:Se.getStatusCodeMessage(y)}})}const d=c.flatMap(o=>o.addresses).join(", "),f={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:d,server_region:this.locationService.activeLocation.id};return g?(await this.connectionService.incrementConnectionCount(),await this.updateIpAddress(),await this.changeConnectionStatus("connected"),await this.updateIcon(),await this.createDownloadNotification(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_succeeded",data:f}),this.analyticsService.sendEvent({type:"amplitude",name:"connection_succeeded",data:f}),this.analyticsService.sendEvent({type:"aws-kinesis",name:"connection_succeeded",data:{event_properties__screen_name:"vpn",event_properties__location:i,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:d}}),{success:!0,data:{success:!0}}):(await this.changeConnectionStatus("disconnected"),await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_check",data:{...f,status_code:"loop_fixed_server"}}),this.analyticsService.sendEvent({type:"amplitude",name:"connection_failed_check",data:{...f,status_code:"loop_fixed_server"}}),this.analyticsService.sendEvent({type:"aws-kinesis",name:"connection_failed_check",data:{event_properties__screen_name:"vpn",event_properties__location:i,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:d}}),{success:!1,errors:[{code:0,status:0,name:"",message:w||this.i18nService.t("base:connect-errors.captive")}]})}async disconnect(e){if(await this.changeConnectionStatus("disconnecting"),!await this.proxyService.disable())return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:disconnect-errors.remove-proxy")}]};await this.updateIpAddress(),await this.changeConnectionStatus("disconnected"),await this.updateIcon();const{name:s,region:i}=this.locationService.activeLocation??{name:"",region:""},r=`${i}, ${s}`;return this.analyticsService.sendEvent({type:"aws-kinesis",name:"disconnected",data:{event_properties__screen_name:"vpn",event_properties__location:r,event_properties__disconnect_reason:e.disconnectReason,event_properties__failed_reason:e.failedReason}}),{success:!0,data:{success:!0}}}async getConnectionState(){await Promise.resolve();const e=this.connectionService.currentIp??Gs;return{success:!0,data:{status:this.connectionService.status,ip:e,connectionCount:this.connectionService.connectionCount}}}async getAutoConnectSetting(){return await Promise.resolve(),{success:!0,data:{status:this.connectionService.useAutoConnect}}}async setAutoConnectSetting(e){return await this.connectionService.setAutoConnect(e.status),{success:!0,data:{success:!0}}}async updateApiDomain(){return this.apiFreeService.isDomainAvailable||await this.apiFreeService.updateDomainData(),this.apiPremiumService.isDomainAvailable||await this.apiPremiumService.updateDomainData(),{success:!0,data:{success:!0}}}async triggerAuthRequiredListener(){const e=function(s){return new Promise((i,r)=>{B.tabs.create({url:s,active:!1}).then(a=>{let c;const u=function(g,w){w.status==="complete"&&g===a.id&&(B.tabs.onUpdated.removeListener(u),B.tabs.remove(g).catch(()=>{}),clearTimeout(c),i(a))};c=setTimeout(()=>{B.tabs.onUpdated.removeListener(u),a.id&&B.tabs.remove(a.id).catch(()=>{}),clearTimeout(c),r()},5e3),B.tabs.onUpdated.addListener(u)}).catch(r)})};try{const t=this.userService.canUsePremiumDomain?this.apiPremiumService.apiDomainUrl:this.apiFreeService.apiDomainUrl;return await e(t),!0}catch{return!1}}async updateIpAddress(){const e=await this.fetchService.request({method:"GET",url:Go});if(e.success)try{const t=e.data.trim().split(/\n/).map(i=>i.split("=")),s=Object.fromEntries(t);await this.connectionService.setIpAddress(s.ip)}catch{this.analyticsService.sendEvent({type:"google-analytics",name:"ip_parse_failed"})}else await this.connectionService.removeIpAddress(),this.analyticsService.sendEvent({type:"google-analytics",name:"ip_check_failed"}),this.analyticsService.sendEvent({type:"amplitude",name:"ip_check_failed"})}async updateIcon(){var e;if(this.connectionService.isConnected){const t=((e=this.locationService.activeLocation)==null?void 0:e.name)??"VeePN",s=this.i18nService.t("base:connect-status.on",{tr_location:t});await this.iconService.setImage("connected"),await this.iconService.setTooltip(s)}else{const t=this.i18nService.t("base:connect-status.off");await this.iconService.setImage("disconnected"),await this.iconService.setTooltip(t)}}async updateLocationData(){const e=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"}):await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});e.success&&await this.locationService.setLocationsData(e.data)}async changeConnectionStatus(e){e==="disconnected"&&await this.appService.setBlockAds(!1),await this.connectionService.setConnectionStatus(e);const t=this.connectionService.currentIp??Gs;this.messageService.notifyPopup({type:"connection-change",success:!0,data:{status:this.connectionService.status,ip:t,connectionCount:this.connectionService.connectionCount}})}async createDownloadNotification(){this.connectionService.connectionCount<=3||Date.now()<this.appService.downloadNotificationTimestamp||(await this.notificationService.notify({options:{type:"image",title:this.i18nService.t("base:download-notification.title"),imageUrl:B.runtime.getURL("/images/desktop-notification.jpg"),message:this.i18nService.t("base:download-notification.message")},callback:"download-app"}),await this.appService.incrementDownloadNotificationTimestamp(),this.analyticsService.sendEvent({type:"google-analytics",name:"notify_popup_pc_download_shown"}),this.analyticsService.sendEvent({type:"amplitude",name:"notify_popup_pc_download_shown"}))}async checkInternetConnection(){return await this.fetchService.request({method:"GET",url:Jo[0],timeout:7e3})}async changeInternetConnectionListener(e){e.online?this.locationService.locationsData||await this.updateLocationData():this.connectionService.status==="connected"&&await this.disconnect({disconnectReason:"internet_connection_changed",failedReason:"n/a"}),this.messageService.notifyPopup({type:"internet-connection-changed",success:!0,data:{online:e.online}})}}class Qo{constructor(e,t){this.messageService=e,this.connectionController=t}init(){this.messageService.subscribe({connect:this.connect.bind(this),disconnect:this.disconnect.bind(this),"get-connection-state":this.getConnectionState.bind(this),"get-locations-data":this.getLocationsData.bind(this),"get-last-active-location":this.getLastActiveLocation.bind(this),"update-locations-data":this.updateLocations.bind(this),"set-active-location":this.setActiveLocation.bind(this),"set-favorite-locations":this.setFavoriteLocations.bind(this),"update-api-domain":this.updateApiDomain.bind(this),"get-auto-connect-setting":this.getAutoConnectSetting.bind(this),"set-auto-connect-setting":this.setAutoConnectSetting.bind(this)})}async connect(){return{...await this.connectionController.connect(),type:"connect"}}async disconnect(e){return{...await this.connectionController.disconnect(e),type:"disconnect"}}async getConnectionState(){return{...await this.connectionController.getConnectionState(),type:"get-connection-state"}}async getLocationsData(){return{...await this.connectionController.getLocationsData(),type:"get-locations-data"}}async getLastActiveLocation(){return{...await this.connectionController.getLastActiveLocation(),type:"get-last-active-location"}}async updateLocations(){return{...await this.connectionController.updateLocations(),type:"update-locations-data"}}async setActiveLocation(e){return{...await this.connectionController.setActiveLocation(e),type:"set-active-location"}}async setFavoriteLocations(e){return{...await this.connectionController.setFavoriteLocations(e),type:"set-favorite-locations"}}async updateApiDomain(){return{...await this.connectionController.updateApiDomain(),type:"update-api-domain"}}async getAutoConnectSetting(){return{...await this.connectionController.getAutoConnectSetting(),type:"get-auto-connect-setting"}}async setAutoConnectSetting(e){return{...await this.connectionController.setAutoConnectSetting(e),type:"set-auto-connect-setting"}}}const Xo=new Yo($t,mt,Ft,Vt,wo,bn,yn,Sn,kn,Vo,qo,Ho,gn,xr,Or),rc=new Qo($t,Xo);class ec{constructor(e,t,s,i,r,a,c,u,h,g,w){this.globalStateService=e,this.apiFreeService=t,this.apiPremiumService=s,this.userService=i,this.locationService=r,this.accessService=a,this.analyticsService=c,this.messageService=u,this.eventService=h,this.i18nService=g,this.webrtcService=w,this.eventService.subscribe({"premium-refresh-token-failed":this.premiumRefreshTokenFailedListener.bind(this),"free-refresh-token-failed":this.freeRefreshTokenFailedListener.bind(this)})}async init(){this.apiFreeService.hasTokens||await this.launch()}async launch(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiFreeService.fetch({method:"POST",url:"apiLaunch",body:{...this.apiFreeService.deviceInfo}});if(!e.success)return await this.criticalErrorOccured({status_code:Se.getStatusCodeMessage(e)}),e;await this.apiFreeService.setTokens({accessToken:e.data.accessToken,refreshToken:e.data.accessToken});const t=await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});if(!t.success)return await this.criticalErrorOccured({status_code:Se.getStatusCodeMessage(t)}),t;if(await this.locationService.setLocationsData(t.data),!this.locationService.activeLocation){const s=e.data.user.default.location;await this.locationService.setActiveLocation(s)}return await this.globalStateService.setCriticalError(!1),{success:!0,data:{success:!0}}}async relaunch(){return this.apiFreeService.isDomainAvailable||await this.apiFreeService.updateDomainData(),this.apiPremiumService.isDomainAvailable||await this.apiPremiumService.updateDomainData(),this.launch()}async getCriticalError(){return await Promise.resolve(),{success:!0,data:{state:this.globalStateService.criticalError}}}async login(e){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const t=await this.apiPremiumService.fetch({method:"POST",url:"authLogin",body:{...this.apiFreeService.deviceInfo,...e}});if(!t.success)return t;await this.apiPremiumService.setTokens({accessToken:t.data.accessToken,refreshToken:t.data.refreshToken});const s=await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"});if(!s.success)return s;const i=t.data.user.default.location;return await this.locationService.setLocationsData(s.data),await this.locationService.setActiveLocation(i),await this.userService.setSubscription(t.data.user.subscription),await this.userService.setUser(t.data.user),this.webrtcService.needEnableWebrtc&&this.webrtcService.enable().catch(()=>{}),{success:!0,data:{success:!0}}}async logout(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiPremiumService.fetch({method:"POST",url:"authLogout"});if(!e.success)return e;await this.userService.removeSubscription(),await this.userService.removeUser();const t=await this.apiFreeService.fetch({method:"POST",url:"apiLaunch",body:{...this.apiFreeService.deviceInfo}});if(!t.success)return await this.criticalErrorOccured({status_code:Se.getStatusCodeMessage(t)}),t;await this.apiFreeService.setTokens({accessToken:t.data.accessToken,refreshToken:""});const s=await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});if(!s.success)return s;const i=t.data.user.default.location;return await this.locationService.setLocationsData(s.data),await this.locationService.setActiveLocation(i),this.webrtcService.disable().catch(()=>{}),{success:!0,data:{success:!0}}}async manageAccount(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiPremiumService.fetch({method:"POST",url:"apiAccountAuthToken"});return e.success?(await this.accessService.proceedToWebsiteAccount({authToken:e.data.token}),{success:!0,data:{success:!0}}):e}async registerAccount(){return await this.accessService.proceedToWebsitePage({page:"pricing",params:{utm_campaign:"signup"}}),{success:!0,data:{success:!0}}}async resetPassword(e){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const t=await this.apiPremiumService.fetch({method:"POST",url:"authForgotPassword",body:e});return t.success?{success:!0,data:{success:!0}}:t}async getUserData(){return await Promise.resolve(),{success:!0,data:{user:this.userService.user,subscription:this.userService.subscription,canUsePremiumDomain:this.userService.canUsePremiumDomain}}}async premiumRefreshTokenFailedListener(){(await this.logout()).success&&this.messageService.notifyPopup({type:"authentication-change",success:!0,data:{success:!0}})}async criticalErrorOccured(e){this.analyticsService.sendEvent({type:"google-analytics",name:"critical_error_occured",data:{...e}}),this.analyticsService.sendEvent({type:"amplitude",name:"critical_error_occured",data:{...e}}),await this.globalStateService.setCriticalError(!0),await this.apiFreeService.removeTokens()}async freeRefreshTokenFailedListener(){await this.criticalErrorOccured({status_code:"free-refresh-token-failed"}),this.messageService.notifyPopup({type:"critical-error",success:!0,data:{success:!0}})}}class tc{constructor(e,t){this.messageService=e,this.authController=t}init(){this.messageService.subscribe({"get-critical-error":this.getCriticalError.bind(this),relaunch:this.relaunch.bind(this),login:this.login.bind(this),logout:this.logout.bind(this),"reset-password":this.resetPassword.bind(this),"register-account":this.registerAccount.bind(this),"manage-account":this.manageAccount.bind(this),"get-user-data":this.getUserData.bind(this)})}async getCriticalError(){return{...await this.authController.getCriticalError(),type:"get-critical-error"}}async relaunch(){return{...await this.authController.relaunch(),type:"relaunch"}}async login(e){return{...await this.authController.login(e),type:"login"}}async logout(){return{...await this.authController.logout(),type:"logout"}}async resetPassword(e){return{...await this.authController.resetPassword(e),type:"reset-password"}}async registerAccount(){return{...await this.authController.registerAccount(),type:"register-account"}}async manageAccount(){return{...await this.authController.manageAccount(),type:"manage-account"}}async getUserData(){return{...await this.authController.getUserData(),type:"get-user-data"}}}const sc=new ec(Ut,bn,yn,Sn,kn,Xi,mt,$t,Ft,gn,po),ac=new tc($t,sc);export{ic as A,ie as B,Vt as C,dn as D,wo as E,ae as F,Xo as G,qo as H,Ft as I,ac as J,rc as K,vs as L,Vo as M,kn as N,sc as O,_o as R,Dt as S,Zt as a,B as b,ps as c,wn as d,se as e,Xt as f,Ys as g,Sr as h,Dn as i,Xa as j,mt as k,Xi as l,$t as m,xr as n,Or as o,gn as p,Ut as q,bn as r,yn as s,Sn as t,gs as u,Xs as v,po as w,D as x,le as y,v as z};
